<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SOP: Governor PID Tuning</title>
    <style>
        /* Control Systems Theme - Blue/Orange */
        :root {
            --primary-color: #1E3A8A;
            --secondary-color: #3B82F6;
            --accent-color: #F97316;
            --warning-color: #EF4444;
            --bg-color: #f4f7f6;
            --text-color: #333;
            --border-color: #BFDBFE;
        }

        body {
            font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            line-height: 1.6;
            color: var(--text-color);
            background-color: var(--bg-color);
            margin: 0;
            padding: 20px;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: #fff;
            padding: 40px;
            box-shadow: 0 4px 15px rgba(30, 58, 138, 0.15);
            border-radius: 8px;
        }

        header {
            border-bottom: 3px solid var(--primary-color);
            padding-bottom: 20px;
            margin-bottom: 30px;
            text-align: center;
        }

        h1 {
            margin: 0;
            color: var(--primary-color);
            font-size: 28px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        h2 {
            color: var(--secondary-color);
            font-size: 18px;
            margin-top: 5px;
            font-weight: 400;
        }

        .lang-toggle {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin: 20px 0;
        }

        .lang-toggle button {
            padding: 8px 20px;
            font-size: 12px;
            font-weight: bold;
            border: 1px solid var(--secondary-color);
            background: transparent;
            color: var(--secondary-color);
            cursor: pointer;
            transition: all 0.3s;
        }

        .lang-toggle button.active {
            background: var(--secondary-color);
            color: #fff;
        }

        .section-title {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: #fff;
            padding: 10px 15px;
            margin-top: 40px;
            border-radius: 4px;
            font-size: 1.2em;
            font-weight: bold;
            display: flex;
            align-items: center;
        }

        .section-title::before {
            content: "‚öô";
            margin-right: 10px;
            font-size: 1.2em;
        }

        h3 {
            color: var(--primary-color);
            border-left: 4px solid var(--accent-color);
            padding-left: 10px;
            margin-top: 25px;
        }

        .module {
            border: 1px solid var(--border-color);
            padding: 15px;
            margin: 15px 0;
            border-radius: 4px;
            background-color: #fafafa;
        }

        .critical {
            border-left: 5px solid var(--warning-color);
            background-color: #FEF2F2;
        }

        .technical {
            border-left: 5px solid var(--secondary-color);
            background-color: #EFF6FF;
        }

        .control {
            border-left: 5px solid var(--accent-color);
            background-color: #FFF7ED;
        }

        ul,
        ol {
            padding-left: 20px;
        }

        li {
            margin-bottom: 8px;
        }

        .back-btn {
            display: inline-block;
            margin-top: 30px;
            text-decoration: none;
            color: var(--secondary-color);
            font-weight: bold;
            border: 1px solid var(--secondary-color);
            padding: 10px 20px;
            border-radius: 4px;
            transition: all 0.3s;
        }

        .back-btn:hover {
            background-color: var(--secondary-color);
            color: #fff;
        }

        strong {
            font-weight: 600;
        }

        .visual-aid {
            border: 2px dashed var(--accent-color);
            padding: 15px;
            margin: 10px 0;
            background: #fff;
            text-align: center;
            color: #666;
            font-size: 0.9em;
        }

        .formula {
            background: linear-gradient(135deg, #EFF6FF, #FFF7ED);
            padding: 15px;
            border-left: 4px solid var(--accent-color);
            margin: 15px 0;
            font-family: 'Courier New', monospace;
            font-size: 1.1em;
            text-align: center;
        }

        .pid-table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
        }

        .pid-table th,
        .pid-table td {
            border: 1px solid var(--border-color);
            padding: 10px;
            text-align: left;
        }

        .pid-table th {
            background-color: var(--primary-color);
            color: #fff;
        }

        .pid-table tr:nth-child(even) {
            background-color: #F9FAFB;
        }
    </style>
</head>

<body>

    <div class="container">

        <header>
            <h1 data-i18n="title">‚öô Governor PID Tuning</h1>
            <h2 data-i18n="subtitle">Proportional-Integral-Derivative Control System</h2>
            <div class="lang-toggle">
                <button onclick="setLang('en')" id="btnEn" class="active">EN</button>
                <button onclick="setLang('bs')" id="btnBs">BS</button>
            </div>
        </header>

        <!-- SAFETY MODULE -->
        <div class="module critical">
            <h3 data-i18n="safety_title">‚ö†Ô∏è MANDATORY SAFETY PROTOCOL</h3>
            <p><strong data-i18n="stop">STOP. READ THIS FIRST.</strong></p>
            <ul>
                <li><strong data-i18n="sync">Grid Synchronization:</strong> <span data-i18n="sync_desc">Never adjust PID
                        parameters while unit is synchronized to grid without dispatcher approval.</span></li>
                <li><strong data-i18n="load_stab">Load Stability:</strong> <span data-i18n="load_desc">Perform tuning
                        tests under stable load conditions (avoid sudden load changes during testing).</span></li>
                <li><strong data-i18n="estop">Emergency Stop:</strong> <span data-i18n="estop_desc">Ensure Emergency
                        Stop button is accessible and functional before starting tests.</span></li>
                <li><strong data-i18n="comm">Communication:</strong> <span data-i18n="comm_desc">Notify operations
                        center before initiating response tests.</span></li>
            </ul>
        </div>

        <div class="section-title" data-i18n="basics_title">PID Basics: The Three Controllers</div>
        <div class="module technical">
            <p data-i18n="gov_desc">The Governor controls the position of 20 wicket gates to maintain constant turbine
                speed (typically 500 RPM for 12-pole generator at 50 Hz).</p>

            <h3 data-i18n="loop_title">Control Loop</h3>
            <div class="formula">
                <span data-i18n="err_eq">Speed Error = Target Speed - Actual Speed</span><br>
                <span data-i18n="out_eq">Control Output = (P √ó Error) + (I √ó ‚à´Error dt) + (D √ó dError/dt)</span>
            </div>

            <h3 data-i18n="prop_title">Proportional (P): Immediate Response</h3>
            <div class="module control">
                <p><strong data-i18n="what_does">What it does:</strong> <span data-i18n="prop_desc">Reacts
                        proportionally to the current speed error.</span></p>
                <ul>
                    <li><strong data-i18n="high_p">High P:</strong> <span data-i18n="high_p_desc">Fast response, but may
                            cause overshoot and oscillations.</span></li>
                    <li><strong data-i18n="low_p">Low P:</strong> <span data-i18n="low_p_desc">Slow response, but
                            stable.</span></li>
                    <li><strong data-i18n="typ_range">Typical Range:</strong> <span data-i18n="prop_range">2.0 - 6.0
                            (dimensionless gain)</span></li>
                </ul>
                <p><strong data-i18n="analogy">üí° Simple Analogy:</strong> <span data-i18n="prop_analogy">Like a driver
                        turning the wheel harder the further off course they are.</span></p>
            </div>

            <h3 data-i18n="int_title">Integral (I): Steady-State Corrector</h3>
            <div class="module control">
                <p><strong data-i18n="what_does">What it does:</strong> <span data-i18n="int_desc">Eliminates
                        steady-state error by accumulating error over time.</span></p>
                <ul>
                    <li><strong data-i18n="high_i">High I:</strong> <span data-i18n="high_i_desc">Fast elimination of
                            offset, but can cause "wind-up" and instability.</span></li>
                    <li><strong data-i18n="low_i">Low I:</strong> <span data-i18n="low_i_desc">Slow correction, but
                            prevents overshoot.</span></li>
                    <li><strong data-i18n="typ_range">Typical Range:</strong> <span data-i18n="int_range">0.5 - 2.0
                            seconds (integration time)</span></li>
                </ul>
                <p><strong data-i18n="analogy">üí° Simple Analogy:</strong> <span data-i18n="int_analogy">Like a driver
                        remembering how long they've been off course and correcting accordingly.</span></p>
            </div>

            <h3 data-i18n="diff_title">Derivative (D): Predictive Damper</h3>
            <div class="module control">
                <p><strong data-i18n="what_does">What it does:</strong> <span data-i18n="diff_desc">Predicts future
                        error based on rate of change and applies damping.</span></p>
                <ul>
                    <li><strong data-i18n="high_d">High D:</strong> <span data-i18n="high_d_desc">Strong damping, but
                            sensitive to noise (can cause jittering).</span></li>
                    <li><strong data-i18n="low_d">Low D:</strong> <span data-i18n="low_d_desc">Less damping, smoother
                            response.</span></li>
                    <li><strong data-i18n="typ_range">Typical Range:</strong> <span data-i18n="diff_range">0.1 - 0.5
                            seconds (derivative time)</span></li>
                </ul>
                <p><strong data-i18n="analogy">üí° Simple Analogy:</strong> <span data-i18n="diff_analogy">Like a driver
                        anticipating a curve and starting to turn before reaching it.</span></p>
            </div>
        </div>

        <div class="section-title" data-i18n="deadband_title">Dead-Band Analysis</div>
        <div class="module technical">
            <h3 data-i18n="what_db">What is Dead-Band?</h3>
            <p><strong data-i18n="db_def">Dead-Band</strong> <span data-i18n="db_desc">is a small speed range (e.g. ¬±0.1
                    RPM) where the governor <em>ignores</em> speed deviations and does not move the wicket gates.</span>
            </p>

            <h3 data-i18n="why_db">Why It Exists</h3>
            <ul>
                <li><strong data-i18n="prevent_wear">Prevent Wear:</strong> <span data-i18n="wear_desc">Constant
                        micro-adjustments cause excessive wear on servomotors, linkage pins, and gate bearings.</span>
                </li>
                <li><strong data-i18n="reduce_hunt">Reduce Hunting:</strong> <span data-i18n="hunt_desc">Without
                        dead-band, governor would constantly "hunt" for exact setpoint, causing oscillations.</span>
                </li>
                <li><strong data-i18n="noise_imm">Noise Immunity:</strong> <span data-i18n="noise_desc">Filters out
                        small speed fluctuations caused by grid noise or sensor jitter.</span></li>
            </ul>

            <h3 data-i18n="db_config">Dead-Band Configuration</h3>
            <table class="pid-table">
                <tr>
                    <th data-i18n="param">Parameter</th>
                    <th data-i18n="typ_val">Typical Value</th>
                    <th data-i18n="eff_high">Effect if Too High</th>
                    <th data-i18n="eff_low">Effect if Too Low</th>
                </tr>
                <tr>
                    <td data-i18n="db_param">Dead-Band</td>
                    <td>¬±0.05 - 0.15 RPM</td>
                    <td data-i18n="eff_high_desc">Slow response to load changes</td>
                    <td data-i18n="eff_low_desc">Excessive wear, hunting</td>
                </tr>
            </table>

            <div class="module critical">
                <strong data-i18n="tech_note">üí° Technical Note:</strong> <span data-i18n="tech_note_desc">Dead-band
                    found during linkage inspection (mechanical "play" in pins) is <em>physical</em> dead-band caused by
                    wear. This is different from <em>electronic</em> dead-band in governor software. Both must be
                    minimized.</span>
            </div>
        </div>

        <div class="section-title" data-i18n="step_resp_title">Stability Test: Step Response</div>
        <div class="module technical">
            <h3 data-i18n="what_step">What is Step Response Test?</h3>
            <p data-i18n="step_desc">Controlled test where load is changed abruptly by a fixed amount (typically 10%
                rated power) to observe how governor responds.</p>

            <h3 data-i18n="test_proc">Test Procedure</h3>
            <ol>
                <li><strong data-i18n="init_cond">Initial Conditions:</strong> <span data-i18n="init_desc">Unit
                        synchronized to grid, stable load (e.g. 5.0 MW).</span></li>
                <li><strong data-i18n="rec_base">Record Baseline:</strong> <span data-i18n="base_desc">Monitor speed,
                        gate position, and power output for 2 minutes.</span></li>
                <li><strong data-i18n="apply_step">Apply Step Change:</strong> <span
                        data-i18n="step_apply_desc">Increase load setpoint by 10% (e.g. 5.0 MW ‚Üí 5.5 MW).</span></li>
                <li><strong data-i18n="obs_resp">Observe Response:</strong> <span data-i18n="resp_desc">Record speed and
                        gate position for 5 minutes.</span></li>
                <li><strong data-i18n="analyze">Analyze:</strong> <span data-i18n="analyze_desc">Measure overshoot,
                        settling time, and oscillation frequency.</span></li>
            </ol>

            <h3 data-i18n="ideal_resp">Ideal Response Characteristics</h3>
            <table class="pid-table">
                <tr>
                    <th data-i18n="metric">Metric</th>
                    <th data-i18n="target_val">Target Value</th>
                    <th data-i18n="interp">Interpretation</th>
                </tr>
                <tr>
                    <td data-i18n="overshoot">Overshoot</td>
                    <td>
                        < 5%</td>
                    <td data-i18n="overshoot_desc">Speed must not exceed setpoint by more than 5%</td>
                </tr>
                <tr>
                    <td data-i18n="settle_time">Settling Time</td>
                    <td>
                        < 10 seconds</td>
                    <td data-i18n="settle_desc">Time to stabilize within ¬±1% of setpoint</td>
                </tr>
                <tr>
                    <td data-i18n="oscillations">Oscillations</td>
                    <td>
                        < 2 cycles</td>
                    <td data-i18n="osc_desc">Should damp out quickly without sustained hunting</td>
                </tr>
            </table>

            <div class="visual-aid" data-i18n="visual_aid">
                [Visualization: Step Response Graph - Time vs. Speed/Power]<br>
                Ideal: Fast rise ‚Üí Small overshoot ‚Üí Quick settling<br>
                Bad: Slow rise OR Large overshoot OR Sustained oscillations
            </div>
        </div>

        <div class="section-title" data-i18n="anti_hunt_title">Anti-Hunting Logic: Diagnosis & Correction</div>
        <div class="module technical">
            <h3 data-i18n="what_hunt">What is Governor Hunting?</h3>
            <p><strong data-i18n="hunt_def">Hunting</strong> <span data-i18n="hunt_def_desc">is continuous oscillation
                    of wicket gates around setpoint, causing speed and power to fluctuate.</span></p>

            <h3 data-i18n="symptoms">Symptoms</h3>
            <ul>
                <li data-i18n="symp_1">Speed oscillates ¬±0.2 - 0.5 RPM at regular frequency (e.g. every 3-5 seconds).
                </li>
                <li data-i18n="symp_2">Gate position oscillates ¬±1-2% continuously.</li>
                <li data-i18n="symp_3">Audible "clicking" or "thumping" from servomotors or linkage.</li>
                <li data-i18n="symp_4">Increased wear on linkage pins and bushings.</li>
            </ul>

            <h3 data-i18n="root_causes">Root Causes</h3>
            <div class="module control">
                <h4 data-i18n="cause_1">1. Mechanical Linkage Backlash</h4>
                <p data-i18n="cause_1_desc">This is a problem identified during pin inspection:</p>
                <ul>
                    <li><strong data-i18n="worn_pins">Worn Pins:</strong> <span data-i18n="worn_desc">Gap > 0.5 mm
                            between pin and bushing.</span></li>
                    <li><strong data-i18n="loose_joints">Loose Joints:</strong> <span data-i18n="loose_desc">Bolts not
                            torqued to spec.</span></li>
                    <li><strong data-i18n="mech_effect">Effect:</strong> <span data-i18n="mech_eff_desc">Servomotor
                            moves, but gates don't respond immediately, causing late feedback loop.</span></li>
                </ul>
                <p><strong data-i18n="solution">Solution:</strong> <span data-i18n="mech_sol">Replace worn pins and
                        bushings, retorque all linkage bolts.</span></p>

                <h4 data-i18n="cause_2">2. Excessive Integral Gain (I)</h4>
                <ul>
                    <li><strong data-i18n="cause">Cause:</strong> <span data-i18n="cause_i_desc">I value too high,
                            causing "integral wind-up".</span></li>
                    <li><strong data-i18n="effect">Effect:</strong> <span data-i18n="eff_i_desc">Controller
                            overcorrects, causing oscillations.</span></li>
                </ul>
                <p><strong data-i18n="solution">Solution:</strong> <span data-i18n="sol_i">Reduce I gain by 20-30% and
                        retest.</span></p>

                <h4 data-i18n="cause_3">3. Insufficient Derivative Damping (D)</h4>
                <ul>
                    <li><strong data-i18n="cause">Cause:</strong> <span data-i18n="cause_d_desc">D value too low,
                            insufficient oscillation damping.</span></li>
                    <li><strong data-i18n="effect">Effect:</strong> <span data-i18n="eff_d_desc">System overshoots and
                            oscillates.</span></li>
                </ul>
                <p><strong data-i18n="solution">Solution:</strong> <span data-i18n="sol_d">Increase D gain by 10-20% and
                        retest.</span></p>

                <h4 data-i18n="cause_4">4. Too Small Dead-Band</h4>
                <ul>
                    <li><strong data-i18n="cause">Cause:</strong> <span data-i18n="cause_db_desc">Dead-band < 0.05
                                RPM.</span>
                    </li>
                    <li><strong data-i18n="effect">Effect:</strong> <span data-i18n="eff_db_desc">Governor responds to
                            noise, causing constant micro-adjustments.</span></li>
                </ul>
                <p><strong data-i18n="solution">Solution:</strong> <span data-i18n="sol_db">Increase dead-band to 0.10 -
                        0.15 RPM.</span></p>
            </div>

            <h3 data-i18n="diag_proc">Diagnostic Procedure</h3>
            <ol>
                <li><strong data-i18n="mech_insp">Mechanical Inspection:</strong> <span data-i18n="mech_insp_desc">Check
                        all linkage pins for play (target < 0.2 mm gap).</span>
                </li>
                <li><strong data-i18n="mon_freq">Monitor Oscillation Freq:</strong> <span data-i18n="freq_desc">Fast
                        oscillations (< 2 sec)=mechanical issue. Slow oscillations (> 5 sec) = PID issue.</span></li>
                <li><strong data-i18n="isolate">Isolate Cause:</strong> <span data-i18n="isolate_desc">Temporarily
                        increase dead-band to 0.3 RPM. If hunting stops, problem is PID tuning. If continues, problem is
                        mechanical.</span></li>
            </ol>
        </div>

        <div class="section-title" data-i18n="tuning_flow">PID Tuning Flow</div>
        <div class="module technical">
            <h3 data-i18n="step_by_step">Step-by-Step Tuning Process</h3>
            <ol>
                <li><strong data-i18n="start_conservative">Start with Conservative Values:</strong> <span
                        data-i18n="cons_vals">P=3.0, I=1.0, D=0.2, Dead-Band=0.10 RPM.</span></li>
                <li><strong data-i18n="perf_test">Perform Step Response Test:</strong> <span
                        data-i18n="apply_load">Apply 10% load change, record response.</span></li>
                <li><strong data-i18n="adj_p">Adjust P:</strong> <span data-i18n="p_logic">If response too slow,
                        increase P by 0.5. If overshoot excessive, decrease P by 0.5.</span></li>
                <li><strong data-i18n="adj_i">Adjust I:</strong> <span data-i18n="i_logic">If steady-state error
                        persists, increase I by 0.2. If hunting occurs, decrease I by 0.2.</span></li>
                <li><strong data-i18n="adj_d">Adjust D:</strong> <span data-i18n="d_logic">If oscillations poorly
                        damped, increase D by 0.1. If response jittery, decrease D by 0.05.</span></li>
                <li><strong data-i18n="iterate">Iterate:</strong> <span data-i18n="repeat">Repeat steps 2-5 until
                        optimal response achieved.</span></li>
                <li><strong data-i18n="doc">Document:</strong> <span data-i18n="record_final">Record final PID values
                        and response graphs in unit log.</span></li>
            </ol>

            <div class="formula" data-i18n="goal">
                Tuning Goal: Fast Response + Minimal Overshoot + No Hunting
            </div>
        </div>

        <div class="section-title" data-i18n="checklist">Materials & Tools Checklist</div>
        <div class="module">
            <ul>
                <li><strong data-i18n="software">Software:</strong> <span data-i18n="soft_desc">Access to Governor HMI
                        (password protected).</span></li>
                <li><strong data-i18n="monitor">Monitoring:</strong> <span data-i18n="mon_desc">SCADA system with speed,
                        power, and gate position trends.</span></li>
                <li><strong data-i18n="docs">Documentation:</strong> <span data-i18n="doc_desc">Response recording
                        software, unit log.</span></li>
                <li><strong data-i18n="mech_tools">Mechanical Tools:</strong> <span data-i18n="tools_desc">Calipers (for
                        measuring linkage play), torque wrench.</span></li>
                <li><strong data-i18n="safety">Safety:</strong> <span data-i18n="safe_tools">Communication radio,
                        emergency stop access.</span></li>
            </ul>
        </div>

        <a href="Francis_Horizontal_Dashboard.html" class="back-btn" data-i18n="back_btn">‚Üê Return to Operations
            Center</a>

    </div>

    <script>
        const i18n = {
            en: {
                title: "‚öô Governor PID Tuning",
                subtitle: "Proportional-Integral-Derivative Control System",
                safety_title: "‚ö†Ô∏è MANDATORY SAFETY PROTOCOL",
                stop: "STOP. READ THIS FIRST.",
                sync: "Grid Synchronization:",
                sync_desc: "Never adjust PID parameters while unit is synchronized to grid without dispatcher approval.",
                load_stab: "Load Stability:",
                load_desc: "Perform tuning tests under stable load conditions (avoid sudden load changes during testing).",
                estop: "Emergency Stop:",
                estop_desc: "Ensure Emergency Stop button is accessible and functional before starting tests.",
                comm: "Communication:",
                comm_desc: "Notify operations center before initiating response tests.",
                basics_title: "PID Basics: The Three Controllers",
                gov_desc: "The Governor controls the position of 20 wicket gates to maintain constant turbine speed (typically 500 RPM for 12-pole generator at 50 Hz).",
                loop_title: "Control Loop",
                err_eq: "Speed Error = Target Speed - Actual Speed",
                out_eq: "Control Output = (P √ó Error) + (I √ó ‚à´Error dt) + (D √ó dError/dt)",
                prop_title: "Proportional (P): Immediate Response",
                what_does: "What it does:",
                prop_desc: "Reacts proportionally to the current speed error.",
                high_p: "High P:",
                high_p_desc: "Fast response, but may cause overshoot and oscillations.",
                low_p: "Low P:",
                low_p_desc: "Slow response, but stable.",
                typ_range: "Typical Range:",
                prop_range: "2.0 - 6.0 (dimensionless gain)",
                analogy: "üí° Simple Analogy:",
                prop_analogy: "Like a driver turning the wheel harder the further off course they are.",
                int_title: "Integral (I): Steady-State Corrector",
                int_desc: "Eliminates steady-state error by accumulating error over time.",
                high_i: "High I:",
                high_i_desc: "Fast elimination of offset, but can cause \"wind-up\" and instability.",
                low_i: "Low I:",
                low_i_desc: "Slow correction, but prevents overshoot.",
                int_range: "0.5 - 2.0 seconds (integration time)",
                int_analogy: "Like a driver remembering how long they've been off course and correcting accordingly.",
                diff_title: "Derivative (D): Predictive Damper",
                diff_desc: "Predicts future error based on rate of change and applies damping.",
                high_d: "High D:",
                high_d_desc: "Strong damping, but sensitive to noise (can cause jittering).",
                low_d: "Low D:",
                low_d_desc: "Less damping, smoother response.",
                diff_range: "0.1 - 0.5 seconds (derivative time)",
                diff_analogy: "Like a driver anticipating a curve and starting to turn before reaching it.",
                deadband_title: "Dead-Band Analysis",
                what_db: "What is Dead-Band?",
                db_def: "Dead-Band",
                db_desc: "is a small speed range (e.g. ¬±0.1 RPM) where the governor <em>ignores</em> speed deviations and does not move the wicket gates.",
                why_db: "Why It Exists",
                prevent_wear: "Prevent Wear:",
                wear_desc: "Constant micro-adjustments cause excessive wear on servomotors, linkage pins, and gate bearings.",
                reduce_hunt: "Reduce Hunting:",
                hunt_desc: "Without dead-band, governor would constantly \"hunt\" for exact setpoint, causing oscillations.",
                noise_imm: "Noise Immunity:",
                noise_desc: "Filters out small speed fluctuations caused by grid noise or sensor jitter.",
                db_config: "Dead-Band Configuration",
                param: "Parameter",
                typ_val: "Typical Value",
                eff_high: "Effect if Too High",
                eff_low: "Effect if Too Low",
                db_param: "Dead-Band",
                eff_high_desc: "Slow response to load changes",
                eff_low_desc: "Excessive wear, hunting",
                tech_note: "üí° Technical Note:",
                tech_note_desc: "Dead-band found during linkage inspection (mechanical \"play\" in pins) is <em>physical</em> dead-band caused by wear. This is different from <em>electronic</em> dead-band in governor software. Both must be minimized.",
                step_resp_title: "Stability Test: Step Response",
                what_step: "What is Step Response Test?",
                step_desc: "Controlled test where load is changed abruptly by a fixed amount (typically 10% rated power) to observe how governor responds.",
                test_proc: "Test Procedure",
                init_cond: "Initial Conditions:",
                init_desc: "Unit synchronized to grid, stable load (e.g. 5.0 MW).",
                rec_base: "Record Baseline:",
                base_desc: "Monitor speed, gate position, and power output for 2 minutes.",
                apply_step: "Apply Step Change:",
                step_apply_desc: "Increase load setpoint by 10% (e.g. 5.0 MW ‚Üí 5.5 MW).",
                obs_resp: "Observe Response:",
                resp_desc: "Record speed and gate position for 5 minutes.",
                analyze: "Analyze:",
                analyze_desc: "Measure overshoot, settling time, and oscillation frequency.",
                ideal_resp: "Ideal Response Characteristics",
                metric: "Metric",
                target_val: "Target Value",
                interp: "Interpretation",
                overshoot: "Overshoot",
                overshoot_desc: "Speed must not exceed setpoint by more than 5%",
                settle_time: "Settling Time",
                settle_desc: "Time to stabilize within ¬±1% of setpoint",
                oscillations: "Oscillations",
                osc_desc: "Should damp out quickly without sustained hunting",
                visual_aid: "[Visualization: Step Response Graph - Time vs. Speed/Power]<br>Ideal: Fast rise ‚Üí Small overshoot ‚Üí Quick settling<br>Bad: Slow rise OR Large overshoot OR Sustained oscillations",
                anti_hunt_title: "Anti-Hunting Logic: Diagnosis & Correction",
                what_hunt: "What is Governor Hunting?",
                hunt_def: "Hunting",
                hunt_def_desc: "is continuous oscillation of wicket gates around setpoint, causing speed and power to fluctuate.",
                symptoms: "Symptoms",
                symp_1: "Speed oscillates ¬±0.2 - 0.5 RPM at regular frequency (e.g. every 3-5 seconds).",
                symp_2: "Gate position oscillates ¬±1-2% continuously.",
                symp_3: "Audible \"clicking\" or \"thumping\" from servomotors or linkage.",
                symp_4: "Increased wear on linkage pins and bushings.",
                root_causes: "Root Causes",
                cause_1: "1. Mechanical Linkage Backlash",
                cause_1_desc: "This is a problem identified during pin inspection:",
                worn_pins: "Worn Pins:",
                worn_desc: "Gap > 0.5 mm between pin and bushing.",
                loose_joints: "Loose Joints:",
                loose_desc: "Bolts not torqued to spec.",
                mech_effect: "Effect:",
                mech_eff_desc: "Servomotor moves, but gates don't respond immediately, causing late feedback loop.",
                solution: "Solution:",
                mech_sol: "Replace worn pins and bushings, retorque all linkage bolts.",
                cause_2: "2. Excessive Integral Gain (I)",
                cause: "Cause:",
                cause_i_desc: "I value too high, causing \"integral wind-up\".",
                effect: "Effect:",
                eff_i_desc: "Controller overcorrects, causing oscillations.",
                sol_i: "Reduce I gain by 20-30% and retest.",
                cause_3: "3. Insufficient Derivative Damping (D)",
                cause_d_desc: "D value too low, insufficient oscillation damping.",
                eff_d_desc: "System overshoots and oscillates.",
                sol_d: "Increase D gain by 10-20% and retest.",
                cause_4: "4. Too Small Dead-Band",
                cause_db_desc: "Dead-band < 0.05 RPM.",
                eff_db_desc: "Governor responds to noise, causing constant micro-adjustments.",
                sol_db: "Increase dead-band to 0.10 - 0.15 RPM.",
                diag_proc: "Diagnostic Procedure",
                mech_insp: "Mechanical Inspection:",
                mech_insp_desc: "Check all linkage pins for play (target < 0.2 mm gap).",
                mon_freq: "Monitor Oscillation Freq:",
                freq_desc: "Fast oscillations (< 2 sec) = mechanical issue. Slow oscillations (> 5 sec) = PID issue.",
                isolate: "Isolate Cause:",
                isolate_desc: "Temporarily increase dead-band to 0.3 RPM. If hunting stops, problem is PID tuning. If continues, problem is mechanical.",
                tuning_flow: "PID Tuning Flow",
                step_by_step: "Step-by-Step Tuning Process",
                start_conservative: "Start with Conservative Values:",
                cons_vals: "P=3.0, I=1.0, D=0.2, Dead-Band=0.10 RPM.",
                perf_test: "Perform Step Response Test:",
                apply_load: "Apply 10% load change, record response.",
                adj_p: "Adjust P:",
                p_logic: "If response too slow, increase P by 0.5. If overshoot excessive, decrease P by 0.5.",
                adj_i: "Adjust I:",
                i_logic: "If steady-state error persists, increase I by 0.2. If hunting occurs, decrease I by 0.2.",
                adj_d: "Adjust D:",
                d_logic: "If oscillations poorly damped, increase D by 0.1. If response jittery, decrease D by 0.05.",
                iterate: "Iterate:",
                repeat: "Repeat steps 2-5 until optimal response achieved.",
                doc: "Document:",
                record_final: "Record final PID values and response graphs in unit log.",
                goal: "Tuning Goal: Fast Response + Minimal Overshoot + No Hunting",
                checklist: "Materials & Tools Checklist",
                software: "Software:",
                soft_desc: "Access to Governor HMI (password protected).",
                monitor: "Monitoring:",
                mon_desc: "SCADA system with speed, power, and gate position trends.",
                docs: "Documentation:",
                doc_desc: "Response recording software, unit log.",
                mech_tools: "Mechanical Tools:",
                tools_desc: "Calipers (for measuring linkage play), torque wrench.",
                safety: "Safety:",
                safe_tools: "Communication radio, emergency stop access.",
                back_btn: "‚Üê Return to Operations Center"
            },
            bs: {
                title: "‚öô PID Pode≈°avanje Regulatora",
                subtitle: "Proporcionalno-Integralno-Diferencijalni Kontrolni Sistem",
                safety_title: "‚ö†Ô∏è OBAVEZNI SIGURNOSNI PROTOKOL",
                stop: "STANI. PRVO PROƒåITAJ OVO.",
                sync: "Sinhronizacija Mre≈æe:",
                sync_desc: "Nikada ne pode≈°avaj PID parametre dok je jedinica sinhronizovana na mre≈æu bez odobrenja dispeƒçera.",
                load_stab: "Stabilnost Tereta:",
                load_desc: "Izvr≈°avaj testove pode≈°avanja u stabilnim uslovima tereta (izbjegavaj nagle promjene tereta tokom testiranja).",
                estop: "Hitno Zaustavljanje:",
                estop_desc: "Osiguraj da je dugme za hitno zaustavljanje dostupno i funkcionalno prije poƒçetka testova.",
                comm: "Komunikacija:",
                comm_desc: "Obavijesti operativni centar prije pokretanja testova odziva.",
                basics_title: "Osnove PID-a: Tri Kontrolera",
                gov_desc: "Regulator kontroli≈°e poziciju 20 sprovodnih lopatica kako bi odr≈æao konstantnu brzinu turbine (tipiƒçno 500 RPM za 12-polni generator na 50 Hz).",
                loop_title: "Kontrolna Petlja",
                err_eq: "Gre≈°ka Brzine = Ciljna Brzina - Stvarna Brzina",
                out_eq: "Izlaz Kontrole = (P √ó Gre≈°ka) + (I √ó ‚à´Gre≈°ka dt) + (D √ó dGre≈°ka/dt)",
                prop_title: "Proporcionalno (P): Trenutni Odziv",
                what_does: "≈†ta radi:",
                prop_desc: "Reaguje proporcionalno na trenutnu gre≈°ku brzine.",
                high_p: "Visok P:",
                high_p_desc: "Brz odziv, ali mo≈æe uzrokovati prebaƒçaj i oscilacije.",
                low_p: "Nizak P:",
                low_p_desc: "Spor odziv, ali stabilan.",
                typ_range: "Tipiƒçan Raspon:",
                prop_range: "2.0 - 6.0 (bezdimenzionalno pojaƒçanje)",
                analogy: "üí° Jednostavna Analogija:",
                prop_analogy: "Kao vozaƒç koji mota volan jaƒçe ≈°to je vi≈°e van kursa.",
                int_title: "Integralno (I): Korektor Stacionarnog Stanja",
                int_desc: "Elimini≈°e gre≈°ku stacionarnog stanja akumulirajuƒái gre≈°ku tokom vremena.",
                high_i: "Visok I:",
                high_i_desc: "Brza eliminacija odstupanja, ali mo≈æe uzrokovati \"wind-up\" i nestabilnost.",
                low_i: "Nizak I:",
                low_i_desc: "Spora korekcija, ali spreƒçava prebaƒçaj.",
                int_range: "0.5 - 2.0 sekundi (vrijeme integracije)",
                int_analogy: "Kao vozaƒç koji pamti koliko dugo je van kursa i korigira u skladu s tim.",
                diff_title: "Diferencijalno (D): Prediktivni Prigu≈°ivaƒç",
                diff_desc: "Predviƒëa buduƒáu gre≈°ku na osnovu brzine promjene i primjenjuje prigu≈°enje.",
                high_d: "Visok D:",
                high_d_desc: "Jako prigu≈°enje, ali osjetljivo na ≈°um (mo≈æe uzrokovati podrhtavanje).",
                low_d: "Nizak D:",
                low_d_desc: "Manje prigu≈°enje, glaƒëi odziv.",
                diff_range: "0.1 - 0.5 sekundi (diferencijalno vrijeme)",
                diff_analogy: "Kao vozaƒç koji predviƒëa krivinu i poƒçinje motati prije nego stigne do nje.",
                deadband_title: "Analiza Mrtve Zone (Dead-Band)",
                what_db: "≈†ta je Mrtva Zona?",
                db_def: "Mrtva zona",
                db_desc: "je mali opseg brzine (npr. ¬±0.1 RPM) u kojem regulator <em>ignori≈°e</em> odstupanja brzine i ne pomjera sprovodne lopatice.",
                why_db: "Za≈°to Postoji",
                prevent_wear: "Spreƒçavanje Habanja:",
                wear_desc: "Stalna mikro-pode≈°avanja uzrokuju pretjerano habanje servomotora, bolcni polu≈æja i le≈æajeva lopatica.",
                reduce_hunt: "Smanjenje Lova (Hunting):",
                hunt_desc: "Bez mrtve zone, regulator bi neprestano \"lovio\" taƒçan setpoint, uzrokujuƒái oscilacije.",
                noise_imm: "Imunitet na ≈†um:",
                noise_desc: "Filtrira male fluktuacije brzine uzrokovane ≈°umom mre≈æe ili podrhtavanjem senzora.",
                db_config: "Konfiguracija Mrtve Zone",
                param: "Parametar",
                typ_val: "Tipiƒçna Vrijednost",
                eff_high: "Efekt ako Preveliko",
                eff_low: "Efekt ako Premalo",
                db_param: "Mrtva Zona",
                eff_high_desc: "Spor odziv na promjene tereta",
                eff_low_desc: "Pretjerano habanje, lov",
                tech_note: "üí° Tehniƒçka Napomena:",
                tech_note_desc: "Mrtva zona koju smo na≈°li tokom inspekcije polu≈æja (mehaniƒçki \"luft\" u bolcnama) je <em>fiziƒçka</em> mrtva zona uzrokovana habanjem. Ovo je razliƒçito od <em>elektronske</em> mrtve zone u softveru regulatora. Obje moraju biti minimizirane.",
                step_resp_title: "Test Stabilnosti: Step Response",
                what_step: "≈†ta je Test Odziva Koraka (Step Response)?",
                step_desc: "Kontrolisani test gdje se teret naglo mijenja za fiksni iznos (tipiƒçno 10% nominalne snage) da se posmatra kako regulator reaguje.",
                test_proc: "Procedura Testa",
                init_cond: "Poƒçetni Uslovi:",
                init_desc: "Jedinica sinhronizovana na mre≈æu, stabilan teret (npr. 5.0 MW).",
                rec_base: "Zapi≈°i Baznu Liniju:",
                base_desc: "Prati brzinu, poziciju lopatica i izlaznu snagu tokom 2 minute.",
                apply_step: "Primijeni Step Promjenu:",
                step_apply_desc: "Poveƒáaj setpoint tereta za 10% (npr. 5.0 MW ‚Üí 5.5 MW).",
                obs_resp: "Posmatraj Odziv:",
                resp_desc: "Zapi≈°i brzinu i poziciju lopatica tokom 5 minuta.",
                analyze: "Analiziraj:",
                analyze_desc: "Izmjeri prebaƒçaj, vrijeme smirivanja i frekvenciju oscilacija.",
                ideal_resp: "Karakteristike Idealnog Odziva",
                metric: "Metrika",
                target_val: "Ciljna Vrijednost",
                interp: "Interpretacija",
                overshoot: "Prebaƒçaj (Overshoot)",
                overshoot_desc: "Brzina ne smije preƒái setpoint za vi≈°e od 5%",
                settle_time: "Vrijeme Smirivanja",
                settle_desc: "Vrijeme stabilizacije unutar ¬±1% od setpointa",
                oscillations: "Oscilacije",
                osc_desc: "Treba brzo prigu≈°iti bez odr≈æivog lova",
                visual_aid: "[Vizualizacija: Graf Odziva Koraka - Vrijeme vs. Brzina/Snaga]<br>Idealno: Brz rast ‚Üí Mali prebaƒçaj ‚Üí Brzo smirivanje<br>Lo≈°e: Spor rast ILI Velik prebaƒçaj ILI Odr≈æive oscilacije",
                anti_hunt_title: "Logika Protiv Lova: Dijagnoza & Korekcija",
                what_hunt: "≈†ta je Lov Regulatora?",
                hunt_def: "Lov (Hunting)",
                hunt_def_desc: "je kontinuirana oscilacija sprovodnih lopatica oko setpointa, uzrokujuƒái da brzina i snaga fluktuiraju.",
                symptoms: "Simptomi",
                symp_1: "Brzina oscilira ¬±0.2 - 0.5 RPM na regularnoj frekvenciji (npr. svakih 3-5 sekundi).",
                symp_2: "Pozicija lopatica oscilira ¬±1-2% kontinuirano.",
                symp_3: "ƒåujno \"kliktaje\" ili \"lupkanje\" iz servomotora ili polu≈æja.",
                symp_4: "Poveƒáano habanje bolcni polu≈æja i ƒçahura.",
                root_causes: "Osnovni Uzroci",
                cause_1: "1. Mehaniƒçki Luft (Linkage Backlash)",
                cause_1_desc: "Ovo je problem koji smo identifikovali tokom inspekcije bolcni:",
                worn_pins: "Istro≈°ene Bolcne:",
                worn_desc: "Zazor > 0.5 mm izmeƒëu bolcne i ƒçahure.",
                loose_joints: "Labavi Spojevi:",
                loose_desc: "Vijci nisu dategnuti na specifikaciju.",
                mech_effect: "Efekt:",
                mech_eff_desc: "Servomotor se pomjera, ali lopatice ne reaguju odmah, uzrokujuƒái kasnu povratnu petlju.",
                solution: "Rje≈°enje:",
                mech_sol: "Zamijeni istro≈°ene bolcne i ƒçahure, ponovo dategni sve vijke polu≈æja.",
                cause_2: "2. Pretjerano Integralno Pojaƒçanje (I)",
                cause: "Uzrok:",
                cause_i_desc: "I vrijednost previsoka, uzrokuje \"integral wind-up\".",
                effect: "Efekt:",
                eff_i_desc: "Kontroler prekomjerno korigira, uzrokujuƒái oscilacije.",
                sol_i: "Smanji I pojaƒçanje za 20-30% i ponovo testiraj.",
                cause_3: "3. Nedovoljno Diferencijalno Prigu≈°enje (D)",
                cause_d_desc: "D vrijednost preniska, nedovoljno prigu≈°enje oscilacija.",
                eff_d_desc: "Sistem prebacuje i oscilira.",
                sol_d: "Poveƒáaj D pojaƒçanje za 10-20% i ponovo testiraj.",
                cause_4: "4. Premala Mrtva Zona",
                cause_db_desc: "Mrtva zona < 0.05 RPM.",
                eff_db_desc: "Regulator reaguje na ≈°um, uzrokujuƒái stalna mikro-pode≈°avanja.",
                sol_db: "Poveƒáaj mrtvu zonu na 0.10 - 0.15 RPM.",
                diag_proc: "Dijagnostiƒçka Procedura",
                mech_insp: "Mehaniƒçka Inspekcija:",
                mech_insp_desc: "Provjeri sve bolcne polu≈æja na luft (cilj < 0.2 mm zazora).",
                mon_freq: "Prati Frekvenciju Oscilacija:",
                freq_desc: "Brze oscilacije (< 2 sek)=mehaniƒçki problem. Spore oscilacije (> 5 sek) = PID problem.",
                isolate: "Izoluj Uzrok:",
                isolate_desc: "Privremeno poveƒáaj mrtvu zonu na 0.3 RPM. Ako lov stane, problem je PID pode≈°avanje. Ako se nastavi, problem je mehaniƒçki.",
                tuning_flow: "Tok PID Pode≈°avanja",
                step_by_step: "Proces Pode≈°avanja Korak-po-Korak",
                start_conservative: "Poƒçni sa Konzervativnim Vrijednostima:",
                cons_vals: "P=3.0, I=1.0, D=0.2, Mrtva Zona=0.10 RPM.",
                perf_test: "Izvr≈°i Test Odziva Koraka:",
                apply_load: "Primijeni 10% promjenu tereta, zapi≈°i odziv.",
                adj_p: "Podesi P:",
                p_logic: "Ako je odziv prespor, poveƒáaj P za 0.5. Ako je prebaƒçaj pretjeran, smanji P za 0.5.",
                adj_i: "Podesi I:",
                i_logic: "Ako gre≈°ka stacionarnog stanja traje, poveƒáaj I za 0.2. Ako se javi lov, smanji I za 0.2.",
                adj_d: "Podesi D:",
                d_logic: "Ako su oscilacije slabo prigu≈°ene, poveƒáaj D za 0.1. Ako je odziv trzav, smanji D za 0.05.",
                iterate: "Iteriraj:",
                repeat: "Ponavljaj korake 2-5 dok se ne postigne optimalan odziv.",
                doc: "Dokumentuj:",
                record_final: "Zapi≈°i konaƒçne PID vrijednosti i grafove odziva u dnevnik jedinice.",
                goal: "Cilj Pode≈°avanja: Brz Odziv + Minimalan Prebaƒçaj + Nema Lova",
                checklist: "Kontrolna Lista Materijala & Alata",
                software: "Softver:",
                soft_desc: "Pristup HMI-ju Regulatora (za≈°tiƒáeno lozinkom).",
                monitor: "Monitoring:",
                mon_desc: "SCADA sistem sa trendovima brzine, snage i pozicije lopatica.",
                docs: "Dokumentacija:",
                doc_desc: "Softver za snimanje odziva, dnevnik jedinice.",
                mech_tools: "Mehaniƒçki Alati:",
                tools_desc: "Pomiƒçno mjerilo (za mjerenje lufta polu≈æja), moment kljuƒç.",
                safety: "Sigurnost:",
                safe_tools: "Komunikacijski radio, pristup hitnom zaustavljanju.",
                back_btn: "‚Üê Povratak u Operativni Centar"
            }
        };

        function setLang(lang) {
            localStorage.setItem('anohub_lang_pref', lang);
            document.getElementById('btnEn').className = lang === 'en' ? 'active' : '';
            document.getElementById('btnBs').className = lang === 'bs' ? 'active' : '';
            document.querySelectorAll('[data-i18n]').forEach(el => {
                const key = el.getAttribute('data-i18n');
                if (i18n[lang][key]) el.innerHTML = i18n[lang][key];
            });
            document.documentElement.lang = lang;
        }

        const pref = localStorage.getItem('anohub_lang_pref') || 'en';
        setLang(pref);
    </script>

</body>

</html>