
> anohub-hpp-risk-excellence-platform@1.0.0 test C:\Users\Home\OneDrive\getting started\Documents\GitHub\anohubsapp
> vitest run

[33m[7m[33m Vitest [33m[27m "deps.inline" is deprecated. If you rely on vite-node directly, use "server.deps.inline" instead. Otherwise, consider using "deps.optimizer.web.include"[39m

[7m[1m[36m RUN [39m[22m[27m [36mv1.6.1[39m [90mC:/Users/Home/OneDrive/getting started/Documents/GitHub/anohubsapp[39m

 [33m‚ùØ[39m src/features/business/logic/__tests__/FinancialCalculator.test.ts [2m ([22m[2m4 tests[22m [2m|[22m [31m3 failed[39m[2m)[22m[90m 9[2mms[22m[39m
[31m   [33m‚ùØ[31m src/features/business/logic/__tests__/FinancialCalculator.test.ts[2m > [22mFinancialCalculator[2m > [22mcalculates correct revenue loss for normal operation[39m
[31m     ‚Üí potentialRev.minus is not a function[39m
[31m   [33m‚ùØ[31m src/features/business/logic/__tests__/FinancialCalculator.test.ts[2m > [22mFinancialCalculator[2m > [22mhandles negative inputs gracefully by clamping to 0[39m
[31m     ‚Üí potentialRev.minus is not a function[39m
[31m   [33m‚ùØ[31m src/features/business/logic/__tests__/FinancialCalculator.test.ts[2m > [22mFinancialCalculator[2m > [22mreturns 0 loss if actual exceeds design (no negative loss)[39m
[31m     ‚Üí potentialRev.minus is not a function[39m
 [32m‚úì[39m src/__tests__/solution-architect.test.ts [2m ([22m[2m3 tests[22m[2m)[22m[90m 3[2mms[22m[39m
 [32m‚úì[39m src/services/__tests__/ShaftSealGuardian.test.ts [2m ([22m[2m2 tests[22m[2m)[22m[90m 5[2mms[22m[39m
 [33m‚ùØ[39m src/__tests__/infrastructure_genesis.test.ts [2m ([22m[2m4 tests[22m [2m|[22m [31m1 failed[39m[2m)[22m[90m 8[2mms[22m[39m
[31m   [33m‚ùØ[31m src/__tests__/infrastructure_genesis.test.ts[2m > [22mInfrastructure Logic (Infrastructure Genesis)[2m > [22mshould calculate Darcy-Weisbach net head accurately[39m
[31m     ‚Üí d_m.div(...).pow is not a function[39m
 [32m‚úì[39m src/components/dashboard/__tests__/QuickCalcSidebar.test.tsx [2m ([22m[2m4 tests[22m[2m)[22m[90m 99[2mms[22m[39m
 [32m‚úì[39m src/__tests__/maturity-audit.test.ts [2m ([22m[2m3 tests[22m[2m)[22m[90m 5[2mms[22m[39m
[90mstderr[2m | src/__tests__/dossier_audit.test.ts[2m > [22m[2mDossier archive integrity (spot checks)[2m > [22m[2mevery manifest entry exists, contains recorded SHA-256, and has an efficiency token[22m[39m
Warning: No efficiency token found in docs/archive/case_studies/cs-compliance-shield/index_3.html (looked for Œ∑, \eta, or 'efficiency')
Warning: No efficiency token found in docs/archive/case_studies/cs-compliance-shield/index_4.html (looked for Œ∑, \eta, or 'efficiency')
Warning: No efficiency token found in docs/archive/case_studies/cs-compliance-shield/index_5.html (looked for Œ∑, \eta, or 'efficiency')
Warning: No efficiency token found in docs/archive/case_studies/cs-compliance-shield/index_6.html (looked for Œ∑, \eta, or 'efficiency')
Warning: No efficiency token found in docs/archive/case_studies/cs-compliance-shield/index_7.html (looked for Œ∑, \eta, or 'efficiency')
Warning: No efficiency token found in docs/archive/case_studies/cs-compliance-shield/index_8.html (looked for Œ∑, \eta, or 'efficiency')

 [32m‚úì[39m src/__tests__/dossier_audit.test.ts [2m ([22m[2m1 test[22m[2m)[22m[90m 7[2mms[22m[39m
[90mstdout[2m | src\i18n\index.ts:7:9[22m[39m
[i18n] üîß Starting bulletproof initialization...

[90mstdout[2m | src\i18n\index.ts:35:15[22m[39m
[i18n] ‚ÑπÔ∏è  No saved language, using default: en

[90mstdout[2m | src\i18n\index.ts:48:9[22m[39m
[i18n] üöÄ Initializing i18next with language: en

[90mstdout[2m | src\i18n\index.ts:80:11[22m[39m
[i18n] ‚úÖ‚úÖ‚úÖ i18next initialized successfully

[90mstdout[2m | src\i18n\index.ts:109:9[22m[39m
[i18n] ‚úÖ Module export ready

 [33m‚ùØ[39m src/features/physics-core/__tests__/PhysicsCalculations.test.ts [2m ([22m[2m7 tests[22m [2m|[22m [31m4 failed[39m[2m)[22m[90m 12[2mms[22m[39m
[31m   [33m‚ùØ[31m src/features/physics-core/__tests__/PhysicsCalculations.test.ts[2m > [22mPhysics Calculation Logic[2m > [22mHydraulics: Surge & Flow[2m > [22mcalculates flow velocity correctly[39m
[31m     ‚Üí radius.pow is not a function[39m
[31m   [33m‚ùØ[31m src/features/physics-core/__tests__/PhysicsCalculations.test.ts[2m > [22mPhysics Calculation Logic[2m > [22mStructural: Hoop Stress (Barlow)[2m > [22mcalculates hoop stress correctly under static + surge load[39m
[31m     ‚Üí staticPressurePa.plus is not a function[39m
[31m   [33m‚ùØ[31m src/features/physics-core/__tests__/PhysicsCalculations.test.ts[2m > [22mPhysics Calculation Logic[2m > [22mDiagnostics: Eccentricity[2m > [22mcalculates eccentricity for Francis (default)[39m
[31m     ‚Üí vibX.abs is not a function[39m
[31m   [33m‚ùØ[31m src/features/physics-core/__tests__/PhysicsCalculations.test.ts[2m > [22mPhysics Calculation Logic[2m > [22mDiagnostics: Eccentricity[2m > [22mhandles Pelton factors correctly[39m
[31m     ‚Üí vibX.abs is not a function[39m
 [33m‚ùØ[39m src/__tests__/expert-thresholds.test.ts [2m ([22m[2m0 test[22m[2m)[22m
 [33m‚ùØ[39m src/__tests__/physics-engine-audit.test.ts [2m ([22m[2m0 test[22m[2m)[22m
 [32m‚úì[39m src/services/__tests__/FinancialImpactEngine.test.ts [2m ([22m[2m2 tests[22m[2m)[22m[90m 3[2mms[22m[39m
 [33m‚ùØ[39m src/__tests__/expert-inference.test.ts [2m ([22m[2m4 tests[22m [2m|[22m [31m4 failed[39m[2m)[22m[90m 6[2mms[22m[39m
[31m   [33m‚ùØ[31m src/__tests__/expert-inference.test.ts[2m > [22mExpertInference Engine[2m > [22mshould detect ISO 10816-3 Vibration violation[39m
[31m     ‚Üí D.isZero is not a function[39m
[31m   [33m‚ùØ[31m src/__tests__/expert-inference.test.ts[2m > [22mExpertInference Engine[2m > [22mshould detect critical bearing temperature[39m
[31m     ‚Üí D.isZero is not a function[39m
[31m   [33m‚ùØ[31m src/__tests__/expert-inference.test.ts[2m > [22mExpertInference Engine[2m > [22mshould calculate Structural Safety Margin (Barlow Link)[39m
[31m     ‚Üí D.isZero is not a function[39m
[31m   [33m‚ùØ[31m src/__tests__/expert-inference.test.ts[2m > [22mExpertInference Engine[2m > [22mshould attach recommendedAction to critical alerts[39m
[31m     ‚Üí D.isZero is not a function[39m
[90mstdout[2m | src\services\supabaseClient.ts:62:17[22m[39m
[SupabaseClient] ‚úÖ Client created successfully

 [32m‚úì[39m src/components/dashboard/__tests__/SyncBadge.test.tsx [2m ([22m[2m6 tests[22m[2m)[22m[90m 54[2mms[22m[39m
[90mstdout[2m | src\services\supabaseClient.ts:62:17[22m[39m
[SupabaseClient] ‚úÖ Client created successfully

[90mstdout[2m | src\services\supabaseClient.ts:62:17[22m[39m
[SupabaseClient] ‚úÖ Client created successfully

 [32m‚úì[39m src/components/dashboard/__tests__/HeritageSearchWidget.test.tsx [2m ([22m[2m6 tests[22m[2m)[22m[90m 108[2mms[22m[39m
 [32m‚úì[39m src/__tests__/turbine-math.test.ts [2m ([22m[2m3 tests[22m[2m)[22m[90m 6[2mms[22m[39m
[90mstdout[2m | src/__tests__/turbine-math.test.ts[2m > [22m[2mTurbine Engineering Math Precision Audit[2m > [22m[2mshould validate Francis Turbine (150m, 30m¬≥/s) with extreme precision[22m[39m
[DEBUG] Francis: Actual=40.6, Expected=40.6, Diff=0

[90mstdout[2m | src\services\supabaseClient.ts:62:17[22m[39m
[SupabaseClient] ‚úÖ Client created successfully

 [33m‚ùØ[39m src/components/dashboard/__tests__/AssetPassportCard_debug.test.tsx [2m ([22m[2m0 test[22m[2m)[22m
[90mstdout[2m | src\services\supabaseClient.ts:62:17[22m[39m
[SupabaseClient] ‚úÖ Client created successfully

 [33m‚ùØ[39m src/__tests__/stress_integrity.test.ts [2m ([22m[2m0 test[22m[2m)[22m
 [33m‚ùØ[39m src/services/__tests__/AIPredictionService.test.ts [2m ([22m[2m0 test[22m[2m)[22m
 [33m‚ùØ[39m src/components/dashboard/__tests__/QuickCalcCard.test.tsx [2m ([22m[2m0 test[22m[2m)[22m
[90mstdout[2m | src\services\supabaseClient.ts:62:17[22m[39m
[SupabaseClient] ‚úÖ Client created successfully

 [32m‚úì[39m src/components/dashboard/__tests__/WorkOrderSummary.test.tsx [2m ([22m[2m5 tests[22m[2m)[22m[90m 119[2mms[22m[39m
[90mstderr[2m | src/components/forensics/__tests__/ForensicDashboard.test.tsx[2m > [22m[2mForensicDashboard (War Game)[2m > [22m[2mrenders in IDLE state[22m[39m
Error: [vitest] No "Microscope" export is defined on the "lucide-react" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

    at VitestMocker.createError (file:///C:/Users/Home/OneDrive/getting%20started/Documents/GitHub/anohubsapp/node_modules/.pnpm/vitest@1.6.1_@types+node@20.19.30_jsdom@27.4.0/node_modules/vitest/dist/vendor/execute.fL3szUAI.js:79:19)
    at Object.get (file:///C:/Users/Home/OneDrive/getting%20started/Documents/GitHub/anohubsapp/node_modules/.pnpm/vitest@1.6.1_@types+node@20.19.30_jsdom@27.4.0/node_modules/vitest/dist/vendor/execute.fL3szUAI.js:153:22)
    at ForensicDashboard (C:\Users\Home\OneDrive\getting started\Documents\GitHub\anohubsapp\src\components\forensics\ForensicDashboard.tsx:86:114)
    at renderWithHooks (C:\Users\Home\OneDrive\getting started\Documents\GitHub\anohubsapp\node_modules\.pnpm\react-dom@18.3.1_react@18.3.1\node_modules\react-dom\cjs\react-dom.development.js:15486:18)
    at mountIndeterminateComponent (C:\Users\Home\OneDrive\getting started\Documents\GitHub\anohubsapp\node_modules\.pnpm\react-dom@18.3.1_react@18.3.1\node_modules\react-dom\cjs\react-dom.development.js:20103:13)
    at beginWork (C:\Users\Home\OneDrive\getting started\Documents\GitHub\anohubsapp\node_modules\.pnpm\react-dom@18.3.1_react@18.3.1\node_modules\react-dom\cjs\react-dom.development.js:21626:16)
    at HTMLUnknownElement.callCallback (C:\Users\Home\OneDrive\getting started\Documents\GitHub\anohubsapp\node_modules\.pnpm\react-dom@18.3.1_react@18.3.1\node_modules\react-dom\cjs\react-dom.development.js:4164:14)
    at HTMLUnknownElement.callTheUserObjectsOperation (C:\Users\Home\OneDrive\getting started\Documents\GitHub\anohubsapp\node_modules\.pnpm\jsdom@27.4.0\node_modules\jsdom\lib\jsdom\living\generated\EventListener.js:26:30)
    at innerInvokeEventListeners (C:\Users\Home\OneDrive\getting started\Documents\GitHub\anohubsapp\node_modules\.pnpm\jsdom@27.4.0\node_modules\jsdom\lib\jsdom\living\events\EventTarget-impl.js:360:16)
    at invokeEventListeners (C:\Users\Home\OneDrive\getting started\Documents\GitHub\anohubsapp\node_modules\.pnpm\jsdom@27.4.0\node_modules\jsdom\lib\jsdom\living\events\EventTarget-impl.js:296:3)
Error: [vitest] No "Microscope" export is defined on the "lucide-react" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

    at VitestMocker.createError (file:///C:/Users/Home/OneDrive/getting%20started/Documents/GitHub/anohubsapp/node_modules/.pnpm/vitest@1.6.1_@types+node@20.19.30_jsdom@27.4.0/node_modules/vitest/dist/vendor/execute.fL3szUAI.js:79:19)
    at Object.get (file:///C:/Users/Home/OneDrive/getting%20started/Documents/GitHub/anohubsapp/node_modules/.pnpm/vitest@1.6.1_@types+node@20.19.30_jsdom@27.4.0/node_modules/vitest/dist/vendor/execute.fL3szUAI.js:153:22)
    at ForensicDashboard (C:\Users\Home\OneDrive\getting started\Documents\GitHub\anohubsapp\src\components\forensics\ForensicDashboard.tsx:86:114)
    at renderWithHooks (C:\Users\Home\OneDrive\getting started\Documents\GitHub\anohubsapp\node_modules\.pnpm\react-dom@18.3.1_react@18.3.1\node_modules\react-dom\cjs\react-dom.development.js:15486:18)
    at mountIndeterminateComponent (C:\Users\Home\OneDrive\getting started\Documents\GitHub\anohubsapp\node_modules\.pnpm\react-dom@18.3.1_react@18.3.1\node_modules\react-dom\cjs\react-dom.development.js:20103:13)
    at beginWork (C:\Users\Home\OneDrive\getting started\Documents\GitHub\anohubsapp\node_modules\.pnpm\react-dom@18.3.1_react@18.3.1\node_modules\react-dom\cjs\react-dom.development.js:21626:16)
    at HTMLUnknownElement.callCallback (C:\Users\Home\OneDrive\getting started\Documents\GitHub\anohubsapp\node_modules\.pnpm\react-dom@18.3.1_react@18.3.1\node_modules\react-dom\cjs\react-dom.development.js:4164:14)
    at HTMLUnknownElement.callTheUserObjectsOperation (C:\Users\Home\OneDrive\getting started\Documents\GitHub\anohubsapp\node_modules\.pnpm\jsdom@27.4.0\node_modules\jsdom\lib\jsdom\living\generated\EventListener.js:26:30)
    at innerInvokeEventListeners (C:\Users\Home\OneDrive\getting started\Documents\GitHub\anohubsapp\node_modules\.pnpm\jsdom@27.4.0\node_modules\jsdom\lib\jsdom\living\events\EventTarget-impl.js:360:16)
    at invokeEventListeners (C:\Users\Home\OneDrive\getting started\Documents\GitHub\anohubsapp\node_modules\.pnpm\jsdom@27.4.0\node_modules\jsdom\lib\jsdom\living\events\EventTarget-impl.js:296:3)
The above error occurred in the <ForensicDashboard> component:

    at ForensicDashboard (C:\Users\Home\OneDrive\getting started\Documents\GitHub\anohubsapp\src\components\forensics\ForensicDashboard.tsx:102:25)

Consider adding an error boundary to your tree to customize error handling behavior.
Visit https://reactjs.org/link/error-boundaries to learn more about error boundaries.

[90mstderr[2m | src/components/forensics/__tests__/ForensicDashboard.test.tsx[2m > [22m[2mForensicDashboard (War Game)[2m > [22m[2mshows CRITICAL ALERT during ATTACK_IN_PROGRESS[22m[39m
Error: [vitest] No "ShieldAlert" export is defined on the "lucide-react" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

    at VitestMocker.createError (file:///C:/Users/Home/OneDrive/getting%20started/Documents/GitHub/anohubsapp/node_modules/.pnpm/vitest@1.6.1_@types+node@20.19.30_jsdom@27.4.0/node_modules/vitest/dist/vendor/execute.fL3szUAI.js:79:19)
    at Object.get (file:///C:/Users/Home/OneDrive/getting%20started/Documents/GitHub/anohubsapp/node_modules/.pnpm/vitest@1.6.1_@types+node@20.19.30_jsdom@27.4.0/node_modules/vitest/dist/vendor/execute.fL3szUAI.js:153:22)
    at ForensicDashboard (C:\Users\Home\OneDrive\getting started\Documents\GitHub\anohubsapp\src\components\forensics\ForensicDashboard.tsx:86:65)
    at renderWithHooks (C:\Users\Home\OneDrive\getting started\Documents\GitHub\anohubsapp\node_modules\.pnpm\react-dom@18.3.1_react@18.3.1\node_modules\react-dom\cjs\react-dom.development.js:15486:18)
    at mountIndeterminateComponent (C:\Users\Home\OneDrive\getting started\Documents\GitHub\anohubsapp\node_modules\.pnpm\react-dom@18.3.1_react@18.3.1\node_modules\react-dom\cjs\react-dom.development.js:20103:13)
    at beginWork (C:\Users\Home\OneDrive\getting started\Documents\GitHub\anohubsapp\node_modules\.pnpm\react-dom@18.3.1_react@18.3.1\node_modules\react-dom\cjs\react-dom.development.js:21626:16)
    at HTMLUnknownElement.callCallback (C:\Users\Home\OneDrive\getting started\Documents\GitHub\anohubsapp\node_modules\.pnpm\react-dom@18.3.1_react@18.3.1\node_modules\react-dom\cjs\react-dom.development.js:4164:14)
    at HTMLUnknownElement.callTheUserObjectsOperation (C:\Users\Home\OneDrive\getting started\Documents\GitHub\anohubsapp\node_modules\.pnpm\jsdom@27.4.0\node_modules\jsdom\lib\jsdom\living\generated\EventListener.js:26:30)
    at innerInvokeEventListeners (C:\Users\Home\OneDrive\getting started\Documents\GitHub\anohubsapp\node_modules\.pnpm\jsdom@27.4.0\node_modules\jsdom\lib\jsdom\living\events\EventTarget-impl.js:360:16)
    at invokeEventListeners (C:\Users\Home\OneDrive\getting started\Documents\GitHub\anohubsapp\node_modules\.pnpm\jsdom@27.4.0\node_modules\jsdom\lib\jsdom\living\events\EventTarget-impl.js:296:3)
Error: [vitest] No "ShieldAlert" export is defined on the "lucide-react" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

    at VitestMocker.createError (file:///C:/Users/Home/OneDrive/getting%20started/Documents/GitHub/anohubsapp/node_modules/.pnpm/vitest@1.6.1_@types+node@20.19.30_jsdom@27.4.0/node_modules/vitest/dist/vendor/execute.fL3szUAI.js:79:19)
    at Object.get (file:///C:/Users/Home/OneDrive/getting%20started/Documents/GitHub/anohubsapp/node_modules/.pnpm/vitest@1.6.1_@types+node@20.19.30_jsdom@27.4.0/node_modules/vitest/dist/vendor/execute.fL3szUAI.js:153:22)
    at ForensicDashboard (C:\Users\Home\OneDrive\getting started\Documents\GitHub\anohubsapp\src\components\forensics\ForensicDashboard.tsx:86:65)
    at renderWithHooks (C:\Users\Home\OneDrive\getting started\Documents\GitHub\anohubsapp\node_modules\.pnpm\react-dom@18.3.1_react@18.3.1\node_modules\react-dom\cjs\react-dom.development.js:15486:18)
    at mountIndeterminateComponent (C:\Users\Home\OneDrive\getting started\Documents\GitHub\anohubsapp\node_modules\.pnpm\react-dom@18.3.1_react@18.3.1\node_modules\react-dom\cjs\react-dom.development.js:20103:13)
    at beginWork (C:\Users\Home\OneDrive\getting started\Documents\GitHub\anohubsapp\node_modules\.pnpm\react-dom@18.3.1_react@18.3.1\node_modules\react-dom\cjs\react-dom.development.js:21626:16)
    at HTMLUnknownElement.callCallback (C:\Users\Home\OneDrive\getting started\Documents\GitHub\anohubsapp\node_modules\.pnpm\react-dom@18.3.1_react@18.3.1\node_modules\react-dom\cjs\react-dom.development.js:4164:14)
    at HTMLUnknownElement.callTheUserObjectsOperation (C:\Users\Home\OneDrive\getting started\Documents\GitHub\anohubsapp\node_modules\.pnpm\jsdom@27.4.0\node_modules\jsdom\lib\jsdom\living\generated\EventListener.js:26:30)
    at innerInvokeEventListeners (C:\Users\Home\OneDrive\getting started\Documents\GitHub\anohubsapp\node_modules\.pnpm\jsdom@27.4.0\node_modules\jsdom\lib\jsdom\living\events\EventTarget-impl.js:360:16)
    at invokeEventListeners (C:\Users\Home\OneDrive\getting started\Documents\GitHub\anohubsapp\node_modules\.pnpm\jsdom@27.4.0\node_modules\jsdom\lib\jsdom\living\events\EventTarget-impl.js:296:3)
The above error occurred in the <ForensicDashboard> component:

    at ForensicDashboard (C:\Users\Home\OneDrive\getting started\Documents\GitHub\anohubsapp\src\components\forensics\ForensicDashboard.tsx:102:25)

Consider adding an error boundary to your tree to customize error handling behavior.
Visit https://reactjs.org/link/error-boundaries to learn more about error boundaries.

 [33m‚ùØ[39m src/components/forensics/__tests__/ForensicDashboard.test.tsx [2m ([22m[2m2 tests[22m [2m|[22m [31m2 failed[39m[2m)[22m[90m 27[2mms[22m[39m
[31m   [33m‚ùØ[31m src/components/forensics/__tests__/ForensicDashboard.test.tsx[2m > [22mForensicDashboard (War Game)[2m > [22mrenders in IDLE state[39m
[31m     ‚Üí [vitest] No "Microscope" export is defined on the "lucide-react" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:
[39m
[31m   [33m‚ùØ[31m src/components/forensics/__tests__/ForensicDashboard.test.tsx[2m > [22mForensicDashboard (War Game)[2m > [22mshows CRITICAL ALERT during ATTACK_IN_PROGRESS[39m
[31m     ‚Üí [vitest] No "ShieldAlert" export is defined on the "lucide-react" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:
[39m
[90mstdout[2m | src\services\supabaseClient.ts:62:17[22m[39m
[SupabaseClient] ‚úÖ Client created successfully

 [33m‚ùØ[39m src/components/dashboard/__tests__/ProtocolLaunchpad.test.tsx [2m ([22m[2m0 test[22m[2m)[22m
 [33m‚ùØ[39m src/features/maintenance/logic/__tests__/Predictor.test.ts [2m ([22m[2m3 tests[22m [2m|[22m [31m3 failed[39m[2m)[22m[90m 6[2mms[22m[39m
[31m   [33m‚ùØ[31m src/features/maintenance/logic/__tests__/Predictor.test.ts[2m > [22mMaintenancePredictor[2m > [22mpredicts normal life when telemetry is optimal[39m
[31m     ‚Üí degradation.equals is not a function[39m
[31m   [33m‚ùØ[31m src/features/maintenance/logic/__tests__/Predictor.test.ts[2m > [22mMaintenancePredictor[2m > [22maccelerates wear when vibration exceeds limit[39m
[31m     ‚Üí degradation.plus is not a function[39m
[31m   [33m‚ùØ[31m src/features/maintenance/logic/__tests__/Predictor.test.ts[2m > [22mMaintenancePredictor[2m > [22mreturns 0 remaining life for expired components[39m
[31m     ‚Üí degradation.equals is not a function[39m
[90mstdout[2m | src\services\supabaseClient.ts:62:17[22m[39m
[SupabaseClient] ‚úÖ Client created successfully

 [33m‚ùØ[39m src/services/__tests__/CommissioningSimulation.test.ts [2m ([22m[2m0 test[22m[2m)[22m
 [32m‚úì[39m src/services/__tests__/ThrustBearingMaster.test.ts [2m ([22m[2m2 tests[22m[2m)[22m[90m 3[2mms[22m[39m
 [32m‚úì[39m src/components/dashboard/__tests__/AssetPassportCard.test.tsx [2m ([22m[2m1 test[22m[2m)[22m[90m 2[2mms[22m[39m
 [32m‚úì[39m src/services/__tests__/BaseGuardian.test.ts [2m ([22m[2m3 tests[22m[2m)[22m[90m 2[2mms[22m[39m
 [32m‚úì[39m src/services/__tests__/KaplanBladePhysics.test.ts [2m ([22m[2m4 tests[22m[2m)[22m[90m 2[2mms[22m[39m
 [32m‚úì[39m src/services/__tests__/TurbineClassifier.test.ts [2m ([22m[2m2 tests[22m[2m)[22m[90m 2[2mms[22m[39m
 [32m‚úì[39m src/__tests__/i18n.test.ts [2m ([22m[2m1 test[22m[2m)[22m[90m 3[2mms[22m[39m
 [32m‚úì[39m src/__tests__/simple.test.ts [2m ([22m[2m1 test[22m[2m)[22m[90m 2[2mms[22m[39m
 [32m‚úì[39m src/services/__tests__/SovereignArchitectReflector.test.ts [2m ([22m[2m1 test[22m[2m)[22m[33m 1555[2mms[22m[39m

[31m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[1m[7m Failed Suites 8 [27m[22m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[39m

[31m[1m[7m FAIL [27m[22m[39m src/__tests__/expert-thresholds.test.ts [2m[ src/__tests__/expert-thresholds.test.ts ][22m
[31m[1mTypeError[22m: default.set is not a function[39m
[36m [2m‚ùØ[22m src/core/PhysicsEngine.ts:[2m10:9[22m[39m
    [90m  8| [39m
    [90m  9| [39m[90m// Configuration for HPP environment precision[39m
    [90m 10| [39m[33mDecimal[39m[33m.[39m[35mset[39m({ precision[33m:[39m [34m20[39m[33m,[39m rounding[33m:[39m [33mDecimal[39m[33m.[39m[33mROUND_HALF_UP[39m })[33m;[39m
    [90m   | [39m        [31m^[39m
    [90m 11| [39m
    [90m 12| [39m[35mexport[39m type [33mRiskStatus[39m [33m=[39m [32m'NOMINAL'[39m [33m|[39m [32m'WARNING'[39m [33m|[39m [32m'CRITICAL'[39m[33m;[39m
[90m [2m‚ùØ[22m src/__tests__/expert-thresholds.test.ts:[2m2:31[22m[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[1/25]‚éØ[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/__tests__/physics-engine-audit.test.ts [2m[ src/__tests__/physics-engine-audit.test.ts ][22m
[31m[1mTypeError[22m: default.set is not a function[39m
[36m [2m‚ùØ[22m src/core/PhysicsEngine.ts:[2m10:9[22m[39m
    [90m  8| [39m
    [90m  9| [39m[90m// Configuration for HPP environment precision[39m
    [90m 10| [39m[33mDecimal[39m[33m.[39m[35mset[39m({ precision[33m:[39m [34m20[39m[33m,[39m rounding[33m:[39m [33mDecimal[39m[33m.[39m[33mROUND_HALF_UP[39m })[33m;[39m
    [90m   | [39m        [31m^[39m
    [90m 11| [39m
    [90m 12| [39m[35mexport[39m type [33mRiskStatus[39m [33m=[39m [32m'NOMINAL'[39m [33m|[39m [32m'WARNING'[39m [33m|[39m [32m'CRITICAL'[39m[33m;[39m
[90m [2m‚ùØ[22m src/__tests__/physics-engine-audit.test.ts:[2m2:31[22m[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[2/25]‚éØ[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/__tests__/stress_integrity.test.ts [2m[ src/__tests__/stress_integrity.test.ts ][22m
[31m[1m[7m FAIL [27m[22m[39m src/services/__tests__/AIPredictionService.test.ts [2m[ src/services/__tests__/AIPredictionService.test.ts ][22m
[31m[1m[7m FAIL [27m[22m[39m src/services/__tests__/CommissioningSimulation.test.ts [2m[ src/services/__tests__/CommissioningSimulation.test.ts ][22m
[31m[1mTypeError[22m: default.set is not a function[39m
[36m [2m‚ùØ[22m src/core/PhysicsEngine.ts:[2m10:9[22m[39m
    [90m  8| [39m
    [90m  9| [39m[90m// Configuration for HPP environment precision[39m
    [90m 10| [39m[33mDecimal[39m[33m.[39m[35mset[39m({ precision[33m:[39m [34m20[39m[33m,[39m rounding[33m:[39m [33mDecimal[39m[33m.[39m[33mROUND_HALF_UP[39m })[33m;[39m
    [90m   | [39m        [31m^[39m
    [90m 11| [39m
    [90m 12| [39m[35mexport[39m type [33mRiskStatus[39m [33m=[39m [32m'NOMINAL'[39m [33m|[39m [32m'WARNING'[39m [33m|[39m [32m'CRITICAL'[39m[33m;[39m
[90m [2m‚ùØ[22m src/contexts/ProjectStateContext.tsx:[2m7:31[22m[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[3/25]‚éØ[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/components/dashboard/__tests__/AssetPassportCard_debug.test.tsx [2m[ src/components/dashboard/__tests__/AssetPassportCard_debug.test.tsx ][22m
[31m[1m[7m FAIL [27m[22m[39m src/components/dashboard/__tests__/ProtocolLaunchpad.test.tsx [2m[ src/components/dashboard/__tests__/ProtocolLaunchpad.test.tsx ][22m
[31m[1m[7m FAIL [27m[22m[39m src/components/dashboard/__tests__/QuickCalcCard.test.tsx [2m[ src/components/dashboard/__tests__/QuickCalcCard.test.tsx ][22m
[31m[1mTypeError[22m: default.set is not a function[39m
[36m [2m‚ùØ[22m src/core/PhysicsEngine.ts:[2m10:9[22m[39m
    [90m  8| [39m
    [90m  9| [39m[90m// Configuration for HPP environment precision[39m
    [90m 10| [39m[33mDecimal[39m[33m.[39m[35mset[39m({ precision[33m:[39m [34m20[39m[33m,[39m rounding[33m:[39m [33mDecimal[39m[33m.[39m[33mROUND_HALF_UP[39m })[33m;[39m
    [90m   | [39m        [31m^[39m
    [90m 11| [39m
    [90m 12| [39m[35mexport[39m type [33mRiskStatus[39m [33m=[39m [32m'NOMINAL'[39m [33m|[39m [32m'WARNING'[39m [33m|[39m [32m'CRITICAL'[39m[33m;[39m
[90m [2m‚ùØ[22m src/features/telemetry/store/useTelemetryStore.ts:[2m4:31[22m[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[4/25]‚éØ[22m[39m

[31m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[1m[7m Failed Tests 17 [27m[22m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[39m

[31m[1m[7m FAIL [27m[22m[39m src/__tests__/expert-inference.test.ts[2m > [22mExpertInference Engine[2m > [22mshould detect ISO 10816-3 Vibration violation
[31m[1mTypeError[22m: D.isZero is not a function[39m
[36m [2m‚ùØ[22m Object.calculateMAWP src/services/StructuralIntegrityService.ts:[2m22:15[22m[39m
    [90m 20| [39m        [35mconst[39m [33mD[39m [33m=[39m [35mnew[39m [33mDecimal[39m(diameter)[33m;[39m
    [90m 21| [39m
    [90m 22| [39m        [35mif[39m ([33mD[39m[33m.[39m[34misZero[39m()) [35mreturn[39m [34m0[39m[33m;[39m
    [90m   | [39m              [31m^[39m
    [90m 23| [39m
    [90m 24| [39m        [90m// P (MPa) = (2 * S * t) / D[39m
[90m [2m‚ùØ[22m Object.audit src/services/StructuralIntegrityService.ts:[2m46:49[22m[39m
[90m [2m‚ùØ[22m Object.analyze src/services/ExpertInference.ts:[2m86:60[22m[39m
[90m [2m‚ùØ[22m src/__tests__/expert-inference.test.ts:[2m94:40[22m[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[5/25]‚éØ[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/__tests__/expert-inference.test.ts[2m > [22mExpertInference Engine[2m > [22mshould detect critical bearing temperature
[31m[1mTypeError[22m: D.isZero is not a function[39m
[36m [2m‚ùØ[22m Object.calculateMAWP src/services/StructuralIntegrityService.ts:[2m22:15[22m[39m
    [90m 20| [39m        [35mconst[39m [33mD[39m [33m=[39m [35mnew[39m [33mDecimal[39m(diameter)[33m;[39m
    [90m 21| [39m
    [90m 22| [39m        [35mif[39m ([33mD[39m[33m.[39m[34misZero[39m()) [35mreturn[39m [34m0[39m[33m;[39m
    [90m   | [39m              [31m^[39m
    [90m 23| [39m
    [90m 24| [39m        [90m// P (MPa) = (2 * S * t) / D[39m
[90m [2m‚ùØ[22m Object.audit src/services/StructuralIntegrityService.ts:[2m46:49[22m[39m
[90m [2m‚ùØ[22m Object.analyze src/services/ExpertInference.ts:[2m86:60[22m[39m
[90m [2m‚ùØ[22m src/__tests__/expert-inference.test.ts:[2m102:40[22m[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[6/25]‚éØ[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/__tests__/expert-inference.test.ts[2m > [22mExpertInference Engine[2m > [22mshould calculate Structural Safety Margin (Barlow Link)
[31m[1mTypeError[22m: D.isZero is not a function[39m
[36m [2m‚ùØ[22m Object.calculateMAWP src/services/StructuralIntegrityService.ts:[2m22:15[22m[39m
    [90m 20| [39m        [35mconst[39m [33mD[39m [33m=[39m [35mnew[39m [33mDecimal[39m(diameter)[33m;[39m
    [90m 21| [39m
    [90m 22| [39m        [35mif[39m ([33mD[39m[33m.[39m[34misZero[39m()) [35mreturn[39m [34m0[39m[33m;[39m
    [90m   | [39m              [31m^[39m
    [90m 23| [39m
    [90m 24| [39m        [90m// P (MPa) = (2 * S * t) / D[39m
[90m [2m‚ùØ[22m Object.audit src/services/StructuralIntegrityService.ts:[2m46:49[22m[39m
[90m [2m‚ùØ[22m Object.analyze src/services/ExpertInference.ts:[2m86:60[22m[39m
[90m [2m‚ùØ[22m src/__tests__/expert-inference.test.ts:[2m109:40[22m[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[7/25]‚éØ[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/__tests__/expert-inference.test.ts[2m > [22mExpertInference Engine[2m > [22mshould attach recommendedAction to critical alerts
[31m[1mTypeError[22m: D.isZero is not a function[39m
[36m [2m‚ùØ[22m Object.calculateMAWP src/services/StructuralIntegrityService.ts:[2m22:15[22m[39m
    [90m 20| [39m        [35mconst[39m [33mD[39m [33m=[39m [35mnew[39m [33mDecimal[39m(diameter)[33m;[39m
    [90m 21| [39m
    [90m 22| [39m        [35mif[39m ([33mD[39m[33m.[39m[34misZero[39m()) [35mreturn[39m [34m0[39m[33m;[39m
    [90m   | [39m              [31m^[39m
    [90m 23| [39m
    [90m 24| [39m        [90m// P (MPa) = (2 * S * t) / D[39m
[90m [2m‚ùØ[22m Object.audit src/services/StructuralIntegrityService.ts:[2m46:49[22m[39m
[90m [2m‚ùØ[22m Object.analyze src/services/ExpertInference.ts:[2m86:60[22m[39m
[90m [2m‚ùØ[22m src/__tests__/expert-inference.test.ts:[2m117:40[22m[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[8/25]‚éØ[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/__tests__/infrastructure_genesis.test.ts[2m > [22mInfrastructure Logic (Infrastructure Genesis)[2m > [22mshould calculate Darcy-Weisbach net head accurately
[31m[1mTypeError[22m: d_m.div(...).pow is not a function[39m
[36m [2m‚ùØ[22m HydraulicIntegrity.calculateNetHead src/services/HydraulicIntegrity.ts:[2m25:33[22m[39m
    [90m 23| [39m    })[33m:[39m { netHead[33m:[39m number[33m,[39m frictionLoss[33m:[39m number[33m,[39m localLosses[33m:[39m number[33m,[39m ‚Ä¶
    [90m 24| [39m        [35mconst[39m d_m [33m=[39m [35mnew[39m [33mDecimal[39m(params[33m.[39mdiameter_mm)[33m.[39m[34mdiv[39m([34m1000[39m)[33m;[39m
    [90m 25| [39m        [35mconst[39m area [33m=[39m d_m[33m.[39m[34mdiv[39m([34m2[39m)[33m.[39m[34mpow[39m([34m2[39m)[33m.[39m[34mmul[39m([33mMath[39m[33m.[39m[33mPI[39m)[33m;[39m
    [90m   | [39m                                [31m^[39m
    [90m 26| [39m        [35mconst[39m velocity [33m=[39m [35mnew[39m [33mDecimal[39m(params[33m.[39mflow)[33m.[39m[34mdiv[39m(area)[33m;[39m
    [90m 27| [39m
[90m [2m‚ùØ[22m src/__tests__/infrastructure_genesis.test.ts:[2m8:43[22m[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[9/25]‚éØ[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/components/forensics/__tests__/ForensicDashboard.test.tsx[2m > [22mForensicDashboard (War Game)[2m > [22mrenders in IDLE state
[31m[1mError[22m: [vitest] No "Microscope" export is defined on the "lucide-react" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:
[39m
vi[33m.[39m[34mmock[39m([32m"lucide-react"[39m[33m,[39m [35masync[39m (importOriginal) [33m=>[39m {
  [35mconst[39m actual [33m=[39m [35mawait[39m [34mimportOriginal[39m()
  [35mreturn[39m {
    [33m...[39mactual[33m,[39m
    [90m// your mocked methods[39m
  }
})

[36m [2m‚ùØ[22m ForensicDashboard src/components/forensics/ForensicDashboard.tsx:[2m86:114[22m[39m
    [90m 84| [39m                    [33m<[39m[33mh1[39m [33mclassName[39m[33m=[39m[32m"text-3xl font-black text-white uppe[39m‚Ä¶
    [90m 85| [39m                        [33m<[39m[33mdiv[39m [33mclassName[39m[33m=[39m[33m{[39m[32m`p-2 rounded-lg transition-col[39m‚Ä¶
    [90m 86| [39m                            [33m{[39mstatus [33m===[39m [32m'ATTACK_IN_PROGRESS'[39m [33m?[39m [33m<[39m[33mShield[39m‚Ä¶
    [90m   | [39m                                                                                                                 [31m^[39m
    [90m 87| [39m                        [33m<[39m[33m/[39m[33mdiv[39m[33m>[39m
    [90m 88| [39m                        [33m{[39m[34mt[39m([32m'forensics.title'[39m[33m,[39m [32m'Diagnostic Forensics'[39m)[33m}[39m
[90m [2m‚ùØ[22m renderWithHooks node_modules/.pnpm/react-dom@18.3.1_react@18.3.1/node_modules/react-dom/cjs/react-dom.development.js:[2m15486:18[22m[39m
[90m [2m‚ùØ[22m mountIndeterminateComponent node_modules/.pnpm/react-dom@18.3.1_react@18.3.1/node_modules/react-dom/cjs/react-dom.development.js:[2m20103:13[22m[39m
[90m [2m‚ùØ[22m beginWork node_modules/.pnpm/react-dom@18.3.1_react@18.3.1/node_modules/react-dom/cjs/react-dom.development.js:[2m21626:16[22m[39m
[90m [2m‚ùØ[22m beginWork$1 node_modules/.pnpm/react-dom@18.3.1_react@18.3.1/node_modules/react-dom/cjs/react-dom.development.js:[2m27465:14[22m[39m
[90m [2m‚ùØ[22m performUnitOfWork node_modules/.pnpm/react-dom@18.3.1_react@18.3.1/node_modules/react-dom/cjs/react-dom.development.js:[2m26599:12[22m[39m
[90m [2m‚ùØ[22m workLoopSync node_modules/.pnpm/react-dom@18.3.1_react@18.3.1/node_modules/react-dom/cjs/react-dom.development.js:[2m26505:5[22m[39m
[90m [2m‚ùØ[22m renderRootSync node_modules/.pnpm/react-dom@18.3.1_react@18.3.1/node_modules/react-dom/cjs/react-dom.development.js:[2m26473:7[22m[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[10/25]‚éØ[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/components/forensics/__tests__/ForensicDashboard.test.tsx[2m > [22mForensicDashboard (War Game)[2m > [22mshows CRITICAL ALERT during ATTACK_IN_PROGRESS
[31m[1mError[22m: [vitest] No "ShieldAlert" export is defined on the "lucide-react" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:
[39m
vi[33m.[39m[34mmock[39m([32m"lucide-react"[39m[33m,[39m [35masync[39m (importOriginal) [33m=>[39m {
  [35mconst[39m actual [33m=[39m [35mawait[39m [34mimportOriginal[39m()
  [35mreturn[39m {
    [33m...[39mactual[33m,[39m
    [90m// your mocked methods[39m
  }
})

[36m [2m‚ùØ[22m ForensicDashboard src/components/forensics/ForensicDashboard.tsx:[2m86:65[22m[39m
    [90m 84| [39m                    [33m<[39m[33mh1[39m [33mclassName[39m[33m=[39m[32m"text-3xl font-black text-white uppe[39m‚Ä¶
    [90m 85| [39m                        [33m<[39m[33mdiv[39m [33mclassName[39m[33m=[39m[33m{[39m[32m`p-2 rounded-lg transition-col[39m‚Ä¶
    [90m 86| [39m                            [33m{[39mstatus [33m===[39m [32m'ATTACK_IN_PROGRESS'[39m [33m?[39m [33m<[39m[33mShield[39m‚Ä¶
    [90m   | [39m                                                                [31m^[39m
    [90m 87| [39m                        [33m<[39m[33m/[39m[33mdiv[39m[33m>[39m
    [90m 88| [39m                        [33m{[39m[34mt[39m([32m'forensics.title'[39m[33m,[39m [32m'Diagnostic Forensics'[39m)[33m}[39m
[90m [2m‚ùØ[22m renderWithHooks node_modules/.pnpm/react-dom@18.3.1_react@18.3.1/node_modules/react-dom/cjs/react-dom.development.js:[2m15486:18[22m[39m
[90m [2m‚ùØ[22m mountIndeterminateComponent node_modules/.pnpm/react-dom@18.3.1_react@18.3.1/node_modules/react-dom/cjs/react-dom.development.js:[2m20103:13[22m[39m
[90m [2m‚ùØ[22m beginWork node_modules/.pnpm/react-dom@18.3.1_react@18.3.1/node_modules/react-dom/cjs/react-dom.development.js:[2m21626:16[22m[39m
[90m [2m‚ùØ[22m beginWork$1 node_modules/.pnpm/react-dom@18.3.1_react@18.3.1/node_modules/react-dom/cjs/react-dom.development.js:[2m27465:14[22m[39m
[90m [2m‚ùØ[22m performUnitOfWork node_modules/.pnpm/react-dom@18.3.1_react@18.3.1/node_modules/react-dom/cjs/react-dom.development.js:[2m26599:12[22m[39m
[90m [2m‚ùØ[22m workLoopSync node_modules/.pnpm/react-dom@18.3.1_react@18.3.1/node_modules/react-dom/cjs/react-dom.development.js:[2m26505:5[22m[39m
[90m [2m‚ùØ[22m renderRootSync node_modules/.pnpm/react-dom@18.3.1_react@18.3.1/node_modules/react-dom/cjs/react-dom.development.js:[2m26473:7[22m[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[11/25]‚éØ[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/features/physics-core/__tests__/PhysicsCalculations.test.ts[2m > [22mPhysics Calculation Logic[2m > [22mHydraulics: Surge & Flow[2m > [22mcalculates flow velocity correctly
[31m[1mTypeError[22m: radius.pow is not a function[39m
[36m [2m‚ùØ[22m Module.calculateFlowVelocity src/features/physics-core/PhysicsCalculations.logic.ts:[2m11:25[22m[39m
    [90m  9| [39m[35mexport[39m [35mconst[39m calculateFlowVelocity [33m=[39m (flow[33m:[39m [33mDecimal[39m[33m,[39m diameter[33m:[39m [33mDecimal[39m‚Ä¶
    [90m 10| [39m    [35mconst[39m radius [33m=[39m diameter[33m.[39m[34mdiv[39m([34m2[39m)[33m;[39m [90m// Assume diameter is in METERS[39m
    [90m 11| [39m    [35mconst[39m area [33m=[39m radius[33m.[39m[34mpow[39m([34m2[39m)[33m.[39m[34mmul[39m([33mDecimal[39m[33m.[39m[34macos[39m([33m-[39m[34m1[39m))[33m;[39m [90m// pi * r^2[39m
    [90m   | [39m                        [31m^[39m
    [90m 12| [39m    [35mreturn[39m flow[33m.[39m[34mdiv[39m(area[33m.[39m[34mgt[39m([34m0[39m) [33m?[39m area [33m:[39m [34m1[39m)[33m;[39m
    [90m 13| [39m}[33m;[39m
[90m [2m‚ùØ[22m src/features/physics-core/__tests__/PhysicsCalculations.test.ts:[2m19:30[22m[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[12/25]‚éØ[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/features/physics-core/__tests__/PhysicsCalculations.test.ts[2m > [22mPhysics Calculation Logic[2m > [22mStructural: Hoop Stress (Barlow)[2m > [22mcalculates hoop stress correctly under static + surge load
[31m[1mTypeError[22m: staticPressurePa.plus is not a function[39m
[36m [2m‚ùØ[22m Module.calculateHoopStress src/features/physics-core/PhysicsCalculations.logic.ts:[2m79:46[22m[39m
    [90m 77| [39m    [90m// Barlow's Formula[39m
    [90m 78| [39m    [35mconst[39m staticPressurePa [33m=[39m rho[33m.[39m[34mmul[39m(gravity)[33m.[39m[34mmul[39m(head)[33m;[39m
    [90m 79| [39m    [35mconst[39m totalPressurePa [33m=[39m staticPressurePa[33m.[39m[34mplus[39m(surgePressurePa)[33m;[39m
    [90m   | [39m                                             [31m^[39m
    [90m 80| [39m
    [90m 81| [39m    [90m// stress = (P * d) / (2 * t)[39m
[90m [2m‚ùØ[22m src/features/physics-core/__tests__/PhysicsCalculations.test.ts:[2m58:31[22m[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[13/25]‚éØ[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/features/physics-core/__tests__/PhysicsCalculations.test.ts[2m > [22mPhysics Calculation Logic[2m > [22mDiagnostics: Eccentricity[2m > [22mcalculates eccentricity for Francis (default)
[31m[1mTypeError[22m: vibX.abs is not a function[39m
[36m [2m‚ùØ[22m Module.calculateEccentricity src/features/physics-core/PhysicsCalculations.logic.ts:[2m106:23[22m[39m
    [90m104| [39m    turbineType[33m:[39m string
    [90m105| [39m)[33m:[39m [33mDecimal[39m [33m=>[39m {
    [90m106| [39m    [35mconst[39m xAbs [33m=[39m vibX[33m.[39m[34mabs[39m()[33m;[39m
    [90m   | [39m                      [31m^[39m
    [90m107| [39m    [35mconst[39m yAbs [33m=[39m vibY[33m.[39m[34mabs[39m()[33m;[39m
    [90m108| [39m
[90m [2m‚ùØ[22m src/features/physics-core/__tests__/PhysicsCalculations.test.ts:[2m101:25[22m[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[14/25]‚éØ[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/features/physics-core/__tests__/PhysicsCalculations.test.ts[2m > [22mPhysics Calculation Logic[2m > [22mDiagnostics: Eccentricity[2m > [22mhandles Pelton factors correctly
[31m[1mTypeError[22m: vibX.abs is not a function[39m
[36m [2m‚ùØ[22m Module.calculateEccentricity src/features/physics-core/PhysicsCalculations.logic.ts:[2m106:23[22m[39m
    [90m104| [39m    turbineType[33m:[39m string
    [90m105| [39m)[33m:[39m [33mDecimal[39m [33m=>[39m {
    [90m106| [39m    [35mconst[39m xAbs [33m=[39m vibX[33m.[39m[34mabs[39m()[33m;[39m
    [90m   | [39m                      [31m^[39m
    [90m107| [39m    [35mconst[39m yAbs [33m=[39m vibY[33m.[39m[34mabs[39m()[33m;[39m
    [90m108| [39m
[90m [2m‚ùØ[22m src/features/physics-core/__tests__/PhysicsCalculations.test.ts:[2m118:25[22m[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[15/25]‚éØ[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/features/business/logic/__tests__/FinancialCalculator.test.ts[2m > [22mFinancialCalculator[2m > [22mcalculates correct revenue loss for normal operation
[31m[1mTypeError[22m: potentialRev.minus is not a function[39m
[36m [2m‚ùØ[22m Module.calculateRevenueLoss src/features/business/logic/FinancialCalculator.ts:[2m57:32[22m[39m
    [90m 55| [39m
    [90m 56| [39m    [90m// Loss is gap. If current > design (overload), loss is 0.[39m
    [90m 57| [39m    [35mconst[39m lossD [33m=[39m potentialRev[33m.[39m[34mminus[39m(currentRev)[33m;[39m
    [90m   | [39m                               [31m^[39m
    [90m 58| [39m    [35mconst[39m finalLoss [33m=[39m [33mDecimal[39m[33m.[39m[34mmax[39m([34m0[39m[33m,[39m lossD)[33m;[39m [90m// Clamp to 0[39m
    [90m 59| [39m
[90m [2m‚ùØ[22m src/features/business/logic/__tests__/FinancialCalculator.test.ts:[2m19:24[22m[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[16/25]‚éØ[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/features/business/logic/__tests__/FinancialCalculator.test.ts[2m > [22mFinancialCalculator[2m > [22mhandles negative inputs gracefully by clamping to 0
[31m[1mTypeError[22m: potentialRev.minus is not a function[39m
[36m [2m‚ùØ[22m Module.calculateRevenueLoss src/features/business/logic/FinancialCalculator.ts:[2m57:32[22m[39m
    [90m 55| [39m
    [90m 56| [39m    [90m// Loss is gap. If current > design (overload), loss is 0.[39m
    [90m 57| [39m    [35mconst[39m lossD [33m=[39m potentialRev[33m.[39m[34mminus[39m(currentRev)[33m;[39m
    [90m   | [39m                               [31m^[39m
    [90m 58| [39m    [35mconst[39m finalLoss [33m=[39m [33mDecimal[39m[33m.[39m[34mmax[39m([34m0[39m[33m,[39m lossD)[33m;[39m [90m// Clamp to 0[39m
    [90m 59| [39m
[90m [2m‚ùØ[22m src/features/business/logic/__tests__/FinancialCalculator.test.ts:[2m57:24[22m[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[17/25]‚éØ[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/features/business/logic/__tests__/FinancialCalculator.test.ts[2m > [22mFinancialCalculator[2m > [22mreturns 0 loss if actual exceeds design (no negative loss)
[31m[1mTypeError[22m: potentialRev.minus is not a function[39m
[36m [2m‚ùØ[22m Module.calculateRevenueLoss src/features/business/logic/FinancialCalculator.ts:[2m57:32[22m[39m
    [90m 55| [39m
    [90m 56| [39m    [90m// Loss is gap. If current > design (overload), loss is 0.[39m
    [90m 57| [39m    [35mconst[39m lossD [33m=[39m potentialRev[33m.[39m[34mminus[39m(currentRev)[33m;[39m
    [90m   | [39m                               [31m^[39m
    [90m 58| [39m    [35mconst[39m finalLoss [33m=[39m [33mDecimal[39m[33m.[39m[34mmax[39m([34m0[39m[33m,[39m lossD)[33m;[39m [90m// Clamp to 0[39m
    [90m 59| [39m
[90m [2m‚ùØ[22m src/features/business/logic/__tests__/FinancialCalculator.test.ts:[2m76:24[22m[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[18/25]‚éØ[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/features/maintenance/logic/__tests__/Predictor.test.ts[2m > [22mMaintenancePredictor[2m > [22mpredicts normal life when telemetry is optimal
[31m[1mTypeError[22m: degradation.equals is not a function[39m
[36m [2m‚ùØ[22m Module.calculateMaintenancePrediction src/features/maintenance/logic/Predictor.ts:[2m43:21[22m[39m
    [90m 41| [39m    }
    [90m 42| [39m
    [90m 43| [39m    [35mif[39m (degradation[33m.[39m[34mequals[39m([34m1.0[39m)) {
    [90m   | [39m                    [31m^[39m
    [90m 44| [39m        stressor [33m=[39m [32m'NONE'[39m[33m;[39m
    [90m 45| [39m    }
[90m [2m‚ùØ[22m src/features/maintenance/logic/__tests__/Predictor.test.ts:[2m28:24[22m[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[19/25]‚éØ[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/features/maintenance/logic/__tests__/Predictor.test.ts[2m > [22mMaintenancePredictor[2m > [22maccelerates wear when vibration exceeds limit
[31m[1mTypeError[22m: degradation.plus is not a function[39m
[36m [2m‚ùØ[22m Module.calculateMaintenancePrediction src/features/maintenance/logic/Predictor.ts:[2m23:35[22m[39m
    [90m 21| [39m        [35mconst[39m vibExcess [33m=[39m [35mnew[39m [33mDecimal[39m(telemetry[33m.[39mcurrentVibrationMMs [33m-[39m ‚Ä¶
    [90m 22| [39m        [35mconst[39m vibImpact [33m=[39m vibExcess[33m.[39m[34mmul[39m([34m0.5[39m)[33m;[39m [90m// 0.5x acceleration per[39m‚Ä¶
    [90m 23| [39m        degradation [33m=[39m degradation[33m.[39m[34mplus[39m(vibImpact)[33m;[39m
    [90m   | [39m                                  [31m^[39m
    [90m 24| [39m
    [90m 25| [39m        [35mif[39m (vibImpact[33m.[39m[34mtoNumber[39m() [33m>[39m maxImpact) {
[90m [2m‚ùØ[22m src/features/maintenance/logic/__tests__/Predictor.test.ts:[2m49:24[22m[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[20/25]‚éØ[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/features/maintenance/logic/__tests__/Predictor.test.ts[2m > [22mMaintenancePredictor[2m > [22mreturns 0 remaining life for expired components
[31m[1mTypeError[22m: degradation.equals is not a function[39m
[36m [2m‚ùØ[22m Module.calculateMaintenancePrediction src/features/maintenance/logic/Predictor.ts:[2m43:21[22m[39m
    [90m 41| [39m    }
    [90m 42| [39m
    [90m 43| [39m    [35mif[39m (degradation[33m.[39m[34mequals[39m([34m1.0[39m)) {
    [90m   | [39m                    [31m^[39m
    [90m 44| [39m        stressor [33m=[39m [32m'NONE'[39m[33m;[39m
    [90m 45| [39m    }
[90m [2m‚ùØ[22m src/features/maintenance/logic/__tests__/Predictor.test.ts:[2m71:24[22m[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[21/25]‚éØ[22m[39m

[2m Test Files [22m [1m[31m14 failed[39m[22m[2m | [22m[1m[32m18 passed[39m[22m[90m (32)[39m
[2m      Tests [22m [1m[31m17 failed[39m[22m[2m | [22m[1m[32m57 passed[39m[22m[90m (74)[39m
[2m   Start at [22m 00:56:57
[2m   Duration [22m 9.61s[2m (transform 3.52s, setup 7.33s, collect 7.24s, tests 2.05s, environment 83.84s, prepare 9.72s)[22m

‚ÄâELIFECYCLE‚Äâ Test failed. See above for more details.
