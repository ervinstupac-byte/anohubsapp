<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SOP: LOAD REJECTION LOGIC | FRANCIS UNIT 1</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700;800&display=swap');

        :root {
            --accent-color: #ef4444;
            /* Red for Safety & Control */
            --bg-dark: #020617;
        }

        body {
            background-color: var(--bg-dark);
            color: #cbd5e1;
            font-family: 'JetBrains Mono', monospace;
            line-height: 1.6;
        }

        .glass-card {
            background: rgba(15, 23, 42, 0.6);
            border: 1px solid rgba(239, 68, 68, 0.2);
            backdrop-filter: blur(12px);
            transition: all 0.3s ease;
        }

        .glass-card:hover {
            border-color: rgba(239, 68, 68, 0.5);
            box-shadow: 0 0 20px rgba(239, 68, 68, 0.1);
        }

        .header-gradient {
            background: linear-gradient(135deg, #7f1d1d 0%, #0c0a09 100%);
            border-bottom: 2px solid var(--accent-color);
        }

        .btn-lang {
            transition: all 0.2s;
        }

        .active-lang {
            background-color: var(--accent-color) !important;
            color: white !important;
            border-color: var(--accent-color) !important;
        }

        .timeline-step {
            position: relative;
            padding-left: 2rem;
            border-left: 2px solid #1e293b;
            margin-bottom: 2rem;
        }

        .timeline-step::before {
            content: '';
            position: absolute;
            left: -7px;
            top: 0;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: #1e293b;
            border: 2px solid var(--bg-dark);
        }

        .timeline-step.active::before {
            background: var(--accent-color);
            box-shadow: 0 0 10px var(--accent-color);
        }

        @keyframes scan {
            0% {
                transform: translateY(-100%);
                opacity: 0;
            }

            50% {
                opacity: 0.5;
            }

            100% {
                transform: translateY(100%);
                opacity: 0;
            }
        }

        .scanner {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(to bottom, transparent, rgba(239, 68, 68, 0.2), transparent);
            animation: scan 4s infinite linear;
            pointer-events: none;
        }
    </style>
</head>

<body class="min-h-screen pb-12">

    <!-- Header -->
    <header class="header-gradient py-8 px-4 md:px-8 mb-8 sticky top-0 z-50">
        <div class="max-w-5xl mx-auto flex flex-col md:flex-row justify-between items-center gap-6">
            <div class="flex items-center gap-4">
                <div class="p-3 bg-red-600 rounded-lg border border-red-400/30">
                    <i data-lucide="zap-off" class="text-white w-8 h-8"></i>
                </div>
                <div>
                    <div class="flex items-center gap-2 mb-1">
                        <span
                            class="px-2 py-0.5 rounded bg-orange-900/30 text-orange-400 text-[10px] font-bold border border-orange-900 uppercase">SOP-LOGIC-003</span>
                        <span class="text-[10px] text-stone-500 uppercase font-bold">REV 3.0</span>
                    </div>
                    <h1 class="text-2xl md:text-3xl font-black text-white tracking-tighter uppercase" data-i18n="title">
                        LOAD REJECTION LOGIC</h1>
                </div>
            </div>

            <div class="flex flex-col items-end gap-3">
                <div class="flex gap-2">
                    <button onclick="setLang('en')" id="btnEn"
                        class="btn-lang px-3 py-1 text-[10px] font-black border border-slate-600 text-slate-400 rounded hover:border-red-500 transition uppercase">EN</button>
                    <button onclick="setLang('bs')" id="btnBs"
                        class="btn-lang px-3 py-1 text-[10px] font-black border border-slate-600 text-slate-400 rounded hover:border-red-500 transition uppercase">BS</button>
                </div>
                <a href="Francis_Horizontal_Dashboard.html"
                    class="flex items-center gap-2 px-4 py-2 bg-slate-900/80 border border-slate-700 rounded text-[10px] font-bold text-slate-300 hover:text-white hover:border-slate-500 transition">
                    <i data-lucide="arrow-left" class="w-3 h-3 text-red-500"></i>
                    <span data-i18n="return">BACK TO DASHBOARD</span>
                </a>
            </div>
        </div>
    </header>

    <main class="max-w-5xl mx-auto px-4 md:px-8">

        <div class="grid grid-cols-1 gap-8">

            <!-- 1. Trigger Event -->
            <section
                class="glass-card rounded-2xl p-8 border-l-4 border-l-red-600 bg-red-950/10 relative overflow-hidden">
                <div class="scanner"></div>
                <div class="flex flex-col md:flex-row justify-between items-start gap-4 mb-6 relative z-10">
                    <h2 class="text-xl font-black text-red-500 uppercase tracking-tight flex items-center gap-2"
                        data-i18n="t_title">
                        <i data-lucide="activity" class="w-5 h-5"></i> TRIGGER (T=0s): GRID LOSS
                    </h2>
                    <span
                        class="px-3 py-1 bg-red-600 text-white text-[10px] font-black rounded-full animate-pulse uppercase">EVENT
                        DETECTED</span>
                </div>
                <p class="text-xs text-slate-400 font-mono leading-relaxed relative z-10" data-i18n="t_desc">Breaker
                    Open Signal (52G) confirmed. Severe frequency oscillation detected. Automatic response initiated.
                </p>
            </section>

            <!-- 2. Execution Timeline -->
            <section class="glass-card rounded-2xl p-8 border-l-4 border-l-slate-700">
                <h2 class="text-xl font-black text-white uppercase tracking-tight mb-8" data-i18n="seq_title">LOGIC
                    EXECUTION SEQUENCE</h2>

                <div class="px-4">
                    <!-- Step 1 -->
                    <div class="timeline-step active">
                        <div class="flex flex-col md:flex-row justify-between md:items-center gap-4">
                            <div>
                                <h3 class="text-white text-[11px] font-black uppercase mb-1 tracking-widest"
                                    data-i18n="s1">01. GOVERNOR REACTION</h3>
                                <p class="text-[10px] text-slate-400" data-i18n="s1_desc">Immediate move to
                                    Speed-No-Load (SNL) position. Prevent runner overspeed (>130% nominal).</p>
                            </div>
                            <span
                                class="text-[9px] font-mono text-red-500 bg-red-500/10 px-2 py-1 rounded border border-red-500/20 uppercase font-black">PRIORITY
                                1</span>
                        </div>
                    </div>

                    <!-- Step 2 -->
                    <div class="timeline-step active">
                        <div class="flex flex-col md:flex-row justify-between gap-4">
                            <div>
                                <h3 class="text-white text-[11px] font-black uppercase mb-1 tracking-widest"
                                    data-i18n="s2">02. MIV 2-STAGE CLOSING</h3>
                                <p class="text-[10px] text-slate-400 mb-3" data-i18n="s2_desc">Executing Closing Law to
                                    mitigate transient pressure and prevent Penstock burst.</p>
                                <div class="grid grid-cols-2 gap-3 mr-auto max-w-sm">
                                    <div class="p-2 bg-slate-900 border border-slate-800 rounded text-center">
                                        <div class="text-[8px] text-slate-500 uppercase font-black" data-i18n="p1">PHASE
                                            1 (FAST)</div>
                                        <div class="text-[9px] text-white font-black">100% &rarr; 20%</div>
                                    </div>
                                    <div class="p-2 bg-slate-900 border border-slate-800 rounded text-center">
                                        <div class="text-[8px] text-slate-500 uppercase font-black" data-i18n="p2">PHASE
                                            2 (CUSHION)</div>
                                        <div class="text-[9px] text-white font-black">20% &rarr; 0%</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Step 3 -->
                    <div class="timeline-step">
                        <div class="flex flex-col md:flex-row justify-between md:items-center gap-4">
                            <div>
                                <h3 class="text-slate-400 text-[11px] font-black uppercase mb-1 tracking-widest"
                                    data-i18n="s3">03. BRAKING LOGIC</h3>
                                <p class="text-[10px] text-slate-500" data-i18n="s3_desc">Waiting for Speed < 20%
                                        Nominal. Automatic energization of mechanical brake solenoids.</p>
                            </div>
                            <span
                                class="text-[9px] font-mono text-slate-600 bg-slate-900 px-2 py-1 rounded border border-slate-800 uppercase font-black">WAITING...</span>
                        </div>
                    </div>
                </div>
            </section>

            <!-- 3. Critical Safety Interlock -->
            <section class="glass-card rounded-2xl p-8 border-l-4 border-l-amber-600">
                <div class="flex items-center gap-3 mb-6">
                    <i data-lucide="git-pull-request-closed" class="text-amber-500 w-6 h-6"></i>
                    <h2 class="text-xl font-black text-white uppercase tracking-tight" data-i18n="int_title">PRIORITY
                        INTERLOCK: MIV STUCK</h2>
                </div>

                <div class="bg-amber-950/20 border border-amber-900/40 p-5 rounded-2xl mb-6">
                    <p class="text-xs text-slate-300 font-bold mb-4" data-i18n="int_desc">IF MIV Angle remains > 5°
                        after 180s (Logic timer expired):</p>
                    <div
                        class="p-4 bg-red-600 text-white rounded-xl text-center border-t-2 border-white/20 shadow-lg animate-pulse">
                        <span class="text-xs font-black tracking-widest uppercase" data-i18n="cmd">COMMAND DISTRIBUTOR
                            LOCK (SQUEEZE MODE)</span>
                    </div>
                </div>

                <div class="flex items-center gap-4 p-4 bg-slate-950/60 rounded-xl border border-slate-800">
                    <i data-lucide="info" class="w-5 h-5 text-slate-500"></i>
                    <p class="text-[10px] text-slate-400 italic" data-i18n="int_note">Squeeze mode directs additional
                        HPU pressure to guide vanes to force closure against foreign objects.</p>
                </div>
            </section>

        </div>

    </main>

    <script>
        lucide.createIcons();

        const i18n = {
            en: {
                title: "LOAD REJECTION LOGIC",
                return: "BACK TO DASHBOARD",
                t_title: "TRIGGER (T=0s): GRID LOSS",
                t_desc: "Breaker Open Signal (52G) confirmed. Severe frequency oscillation detected. Automatic response initiated.",
                seq_title: "LOGIC EXECUTION SEQUENCE",
                s1: "01. GOVERNOR REACTION",
                s1_desc: "Immediate move to Speed-No-Load (SNL) position. Prevent runner overspeed (>130% nominal).",
                s2: "02. MIV 2-STAGE CLOSING",
                s2_desc: "Executing Closing Law to mitigate transient pressure and prevent Penstock burst.",
                p1: "PHASE 1 (FAST)", p2: "PHASE 2 (CUSHION)",
                s3: "03. BRAKING LOGIC",
                s3_desc: "Waiting for Speed < 20% Nominal. Automatic energization of mechanical brake solenoids.",
                int_title: "PRIORITY INTERLOCK: MIV STUCK",
                int_desc: "IF MIV Angle remains > 5° after 180s (Logic timer expired):",
                cmd: "COMMAND DISTRIBUTOR LOCK (SQUEEZE MODE)",
                int_note: "Squeeze mode directs additional HPU pressure to guide vanes to force closure against foreign objects."
            },
            bs: {
                title: "LOGIKA ISPADA TERETA",
                return: "POVRATAK NA KONTROLNU TABLU",
                t_title: "OKIDAČ (T=0s): GUBITAK MREŽE",
                t_desc: "Signal otvorenog prekidača (52G) potvrđen. Detektovane teške oscilacije frekvencije. Automatski odgovor pokrenut.",
                seq_title: "SEKVENCA IZVRŠENJA LOGIKE",
                s1: "01. REAKCIJA REGULATORA",
                s1_desc: "Momentalni pomak u SNL poziciju. Spriječite pobjeg brzine (>130% nominalne).",
                s2: "02. ZATVARANJE GUV-A U 2 FAZE",
                s2_desc: "Izvršavanje zakona zatvaranja radi ublažavanja pritiska i sprečavanja pucanja cjevovoda.",
                p1: "FAZA 1 (BRZO)", p2: "FAZA 2 (PRIGUŠENO)",
                s3: "03. LOGIKA KOČENJA",
                s3_desc: "Čeka se brzina < 20% nominalne. Automatsko napajanje špula mehaničkih kočnica.",
                int_title: "KRITIČNA BLOKADA: GUV ZAGLAVLJEN",
                int_desc: "AKO GUV ugao ostane > 5° nakon 180s (Logički tajmer istekao):",
                cmd: "KOMANDA BLOKADE DISTRIBUTORA (SQUEEZE MOD)",
                int_note: "Squeeze mod usmjerava dodatni HPU pritisak na lopatice kako bi forsirao zatvaranje uprkos stranim tijelima."
            }
        };

        function setLang(lang) {
            localStorage.setItem('anohub_lang_pref', lang);

            document.querySelectorAll('.btn-lang').forEach(btn => btn.classList.remove('active-lang'));
            if (lang === 'en') document.getElementById('btnEn').classList.add('active-lang');
            else document.getElementById('btnBs').classList.add('active-lang');

            document.querySelectorAll('[data-i18n]').forEach(el => {
                const key = el.getAttribute('data-i18n');
                if (i18n[lang][key]) el.innerText = i18n[lang][key];
            });
        }

        const pref = localStorage.getItem('anohub_lang_pref') || 'en';
        setLang(pref);
    </script>
</body>

</html>