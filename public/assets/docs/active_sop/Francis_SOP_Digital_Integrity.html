<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SOP: Digital Integrity & Calibration</title>
    <style>
        /* Cyber/Digital Theme - Black/Cyan/Neon */
        :root {
            --primary-color: #06b6d4;
            /* Cyan-500 */
            --secondary-color: #22d3ee;
            /* Cyan-400 */
            --accent-color: #a5f3fc;
            /* Cyan-200 */
            --warning-color: #f43f5e;
            /* Rose-500 */
            --bg-color: #000000;
            --text-color: #ecfeff;
            /* Cyan-50 */
            --border-color: #0891b2;
            /* Cyan-600 */
            --matrix-color: rgba(6, 182, 212, 0.1);
        }

        body {
            font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
            line-height: 1.6;
            color: var(--text-color);
            background-color: var(--bg-color);
            background-image: linear-gradient(0deg, transparent 24%, var(--matrix-color) 25%, var(--matrix-color) 26%, transparent 27%, transparent 74%, var(--matrix-color) 75%, var(--matrix-color) 76%, transparent 77%, transparent), linear-gradient(90deg, transparent 24%, var(--matrix-color) 25%, var(--matrix-color) 26%, transparent 27%, transparent 74%, var(--matrix-color) 75%, var(--matrix-color) 76%, transparent 77%, transparent);
            background-size: 50px 50px;
            margin: 0;
            padding: 20px;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: rgba(10, 10, 15, 0.95);
            padding: 40px;
            box-shadow: 0 0 20px rgba(6, 182, 212, 0.4);
            border-radius: 4px;
            border: 1px solid var(--border-color);
        }

        header {
            border-bottom: 2px solid var(--primary-color);
            padding-bottom: 20px;
            margin-bottom: 30px;
            text-align: center;
            background: linear-gradient(90deg, rgba(0, 0, 0, 0) 0%, rgba(6, 182, 212, 0.2) 50%, rgba(0, 0, 0, 0) 100%);
        }

        /* Language Toggle Switch */
        .lang-switch {
            position: absolute;
            top: 20px;
            right: 20px;
            display: flex;
            gap: 10px;
        }

        .lang-btn {
            background: transparent;
            border: 1px solid var(--primary-color);
            color: var(--primary-color);
            padding: 5px 10px;
            cursor: pointer;
            border-radius: 4px;
            font-weight: bold;
            font-family: monospace;
        }

        .lang-btn.active {
            background: var(--primary-color);
            color: black;
            font-weight: bold;
            box-shadow: 0 0 10px var(--primary-color);
        }

        h1 {
            margin: 0;
            color: var(--secondary-color);
            font-size: 28px;
            text-transform: uppercase;
            letter-spacing: 4px;
            text-shadow: 0 0 10px var(--primary-color);
        }

        h2 {
            color: var(--accent-color);
            font-size: 16px;
            margin-top: 5px;
            font-weight: 400;
        }

        .section-title {
            background: rgba(6, 182, 212, 0.2);
            color: var(--secondary-color);
            padding: 10px 15px;
            margin-top: 40px;
            border-left: 4px solid var(--primary-color);
            font-size: 1.2em;
            font-weight: bold;
            display: flex;
            align-items: center;
        }

        .section-title::before {
            content: ">>";
            margin-right: 15px;
            font-family: monospace;
        }

        h3 {
            color: var(--accent-color);
            border-bottom: 1px dashed var(--border-color);
            padding-bottom: 5px;
            margin-top: 25px;
        }

        .module {
            border: 1px solid var(--border-color);
            padding: 15px;
            margin: 15px 0;
            background: rgba(0, 0, 0, 0.5);
        }

        .critical {
            border: 1px solid var(--warning-color);
            background: rgba(244, 63, 94, 0.1);
        }

        .code-box {
            font-family: 'Courier New', monospace;
            background: #111;
            padding: 10px;
            border-radius: 4px;
            border: 1px solid #333;
            color: #0f0;
            margin: 10px 0;
            white-space: pre-wrap;
        }

        .back-btn {
            display: inline-block;
            margin-top: 30px;
            text-decoration: none;
            color: var(--bg-color);
            background-color: var(--primary-color);
            font-weight: bold;
            padding: 10px 20px;
            transition: all 0.3s;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .back-btn:hover {
            background-color: var(--secondary-color);
            box-shadow: 0 0 15px var(--primary-color);
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
            font-size: 0.9em;
        }

        th,
        td {
            border: 1px solid var(--border-color);
            padding: 8px;
            text-align: left;
        }

        th {
            background: rgba(6, 182, 212, 0.3);
            color: var(--text-color);
        }
    </style>
</head>

<body>
    <div class="lang-switch">
        <button class="lang-btn active" onclick="setLang('en')">EN</button>
        <button class="lang-btn" onclick="setLang('bs')">BS</button>
    </div>

    <div class="container">
        <header>
            <h1 data-i18n="title">DIGITAL_INTEGRITY_PROTOCOL</h1>
            <h2 data-i18n="subtitle">Syncing the Physical Twin with the Digital Twin</h2>
        </header>

        <div class="module critical">
            <h3 data-i18n="disc_risk">⚠️ THE DISCONNECT RISK</h3>
            <p><strong data-i18n="disc_strong">A SCADA screen is not reality.</strong> <span data-i18n="disc_text1">It
                    is a digital interpretation of a voltage signal.</span></p>
            <p data-i18n="disc_text2">If the SCADA says "Bearing Temp: 45°C" but the bearing is physically 80°C because
                of a drifted resistance signal, the machine burns while the screen looks normal. <strong>Trust, but
                    Calibrate.</strong></p>
        </div>

        <div class="section-title" data-i18n="section1_title">LOOP CHECKING: END-TO-END VALIDATION</div>
        <div class="module">
            <p><strong data-i18n="proc_label">Procedure for Analog Signal Verification (4-20mA):</strong></p>
            <p data-i18n="proc_text">Do not rely on the sensor display alone. You must verify the entire chain: Sensor →
                PLC Input Card → SCADA Display.</p>

            <div class="code-box" data-i18n="code_box_1">
                TEST SEQUENCE: GUIDE VANE POSITION
                1. Physically measure Guide Vane opening (mm).
                2. Calculate theoretical % (e.g., 50mm = 20%).
                3. Radio Operator A: "Physical is 20.0%"
                4. Radio Operator B (Control Room): "SCADA reads ???"
                --------------------------------------------------
                PASS: 19.9% - 20.1%
                FAIL: < 19.8% or> 20.2% -> RE-SCALE PLC
            </div>

            <p><strong data-i18n="deadband_label">The "Deadband" Trap:</strong> <span data-i18n="deadband_text">If SCADA
                    reads 0.0% but the physical valve is cracked open by 2mm, you are wire-drawing the seat.
                    <strong>Zero must be ABSOLUTE ZERO.</strong></span></p>
        </div>

        <div class="section-title" data-i18n="section2_title">SENSOR DRIFT PROTOCOL</div>
        <div class="module">
            <h3 data-i18n="pressure_title">Pressure Transducers (Strain Gauge)</h3>
            <p><strong data-i18n="drift_cause_label">Drift Cause:</strong> <span
                    data-i18n="drift_cause_text">Over-pressure spikes (water hammer) deform the diaphragm
                    permanently.</span></p>
            <p><strong data-i18n="calib_check_label">Calibration Check (Atmospheric):</strong></p>
            <ul>
                <li data-i18n="calib1">Isolate sensor and vent to atmosphere.</li>
                <li data-i18n="calib2"><strong>SCADA must read 0.00 Bar.</strong></li>
                <li data-i18n="calib3">If reading is > 0.1 Bar (phantom pressure), the zero-point has shifted. Replace
                    or re-zero.</li>
            </ul>

            <h3 data-i18n="rtd_title">RTD Temperature Sensors (Validation)</h3>
            <p><strong data-i18n="rtd_drift_label">Drift Cause:</strong> <span data-i18n="rtd_drift_text">loose terminal
                    screws increase resistance (Ohms), causing artificially HIGH temperature readings.</span></p>
            <p><strong data-i18n="cold_iron_label">The "Cold Iron" Check:</strong></p>
            <ul>
                <li data-i18n="cold_iron1">After 24h shutdown, all RTDs (Bearings, Oil, Water) should read within 1-2°C
                    of each other (Ambient Temp).</li>
                <li data-i18n="cold_iron2">If Turbine Bearing reads 35°C while surrounding air is 20°C (after cooldown),
                    the sensor loop has high resistance. <strong>Check the terminal block for oxidation.</strong></li>
            </ul>
        </div>

        <div class="section-title" data-i18n="section3_title">ALARM LOGIC AUDIT</div>
        <div class="module">
            <p data-i18n="audit_intro">Review and hard-code these safety margins into the PLC Logic.</p>

            <table>
                <tr>
                    <th data-i18n="th_component">Component</th>
                    <th data-i18n="th_limit">Material Limit</th>
                    <th data-i18n="th_trip">Trip (High-High) Setpoint</th>
                    <th data-i18n="th_alarm">Alarm (High) Setpoint</th>
                    <th data-i18n="th_rationale">Rationale</th>
                </tr>
                <tr>
                    <td data-i18n="td_babbitt">Babbitt Bearings</td>
                    <td data-i18n="td_melt">130°C (Melt)</td>
                    <td><span style="color:var(--warning-color); font-weight:bold;">80°C</span></td>
                    <td>70°C</td>
                    <td data-i18n="td_zone">Sudden failure zone starts > 90°C</td>
                </tr>
                <tr>
                    <td data-i18n="td_stator">Stator Windings (Class F)</td>
                    <td>155°C</td>
                    <td><span style="color:var(--warning-color); font-weight:bold;">120°C</span></td>
                    <td>110°C</td>
                    <td data-i18n="td_insolation">Maximize insulation life (10° rule)</td>
                </tr>
                <tr>
                    <td data-i18n="td_oil">Hydraulic Oil</td>
                    <td data-i18n="td_oxi">60°C (Oxidation)</td>
                    <td><span style="color:var(--warning-color); font-weight:bold;">55°C</span></td>
                    <td>50°C</td>
                    <td data-i18n="td_varnish">Prevent varnish formation</td>
                </tr>
                <tr>
                    <td data-i18n="td_overspeed">Turbine Overspeed</td>
                    <td data-i18n="td_runaway">Runaway</td>
                    <td><span style="color:var(--warning-color); font-weight:bold;">115%</span></td>
                    <td>110%</td>
                    <td data-i18n="td_centrifugal">Centrifugal force limit</td>
                </tr>
            </table>
        </div>

        <div class="section-title" data-i18n="section4_title">DIGITAL SAFETY LOCKS</div>
        <div class="module">
            <p><strong data-i18n="forcing_label">Forcing Signals:</strong></p>
            <ul>
                <li data-i18n="force1">NEVER leave a "Force" active in the PLC code after testing.</li>
                <li data-i18n="force2"><strong>Audit:</strong> Check "Forced Variables" list weekly. A forgotten "Force
                    True" on the Lube Oil Pressure switch will destroy the turbine.</li>
            </ul>
        </div>

        <a href="./Francis_Horizontal.html" class="back-btn" data-i18n="back_btn">
            << RETURN_MAIN_SYSTEM</a>
    </div>

    <script>
        const i18n = {
            en: {
                title: "DIGITAL_INTEGRITY_PROTOCOL",
                subtitle: "Syncing the Physical Twin with the Digital Twin",
                disc_risk: "⚠️ THE DISCONNECT RISK",
                disc_strong: "A SCADA screen is not reality.",
                disc_text1: "It is a digital interpretation of a voltage signal.",
                disc_text2: "If the SCADA says \"Bearing Temp: 45°C\" but the bearing is physically 80°C because of a drifted resistance signal, the machine burns while the screen looks normal. <strong>Trust, but Calibrate.</strong>",
                section1_title: "LOOP CHECKING: END-TO-END VALIDATION",
                proc_label: "Procedure for Analog Signal Verification (4-20mA):",
                proc_text: "Do not rely on the sensor display alone. You must verify the entire chain: Sensor → PLC Input Card → SCADA Display.",
                code_box_1: "TEST SEQUENCE: GUIDE VANE POSITION\n1. Physically measure Guide Vane opening (mm).\n2. Calculate theoretical % (e.g., 50mm = 20%).\n3. Radio Operator A: \"Physical is 20.0%\"\n4. Radio Operator B (Control Room): \"SCADA reads ???\"\n--------------------------------------------------\nPASS: 19.9% - 20.1%\nFAIL: < 19.8% or > 20.2% -> RE-SCALE PLC",
                deadband_label: "The \"Deadband\" Trap:",
                deadband_text: "If SCADA reads 0.0% but the physical valve is cracked open by 2mm, you are wire-drawing the seat. <strong>Zero must be ABSOLUTE ZERO.</strong>",
                section2_title: "SENSOR DRIFT PROTOCOL",
                pressure_title: "Pressure Transducers (Strain Gauge)",
                drift_cause_label: "Drift Cause:",
                drift_cause_text: "Over-pressure spikes (water hammer) deform the diaphragm permanently.",
                calib_check_label: "Calibration Check (Atmospheric):",
                calib1: "Isolate sensor and vent to atmosphere.",
                calib2: "<strong>SCADA must read 0.00 Bar.</strong>",
                calib3: "If reading is > 0.1 Bar (phantom pressure), the zero-point has shifted. Replace or re-zero.",
                rtd_title: "RTD Temperature Sensors (Validation)",
                rtd_drift_label: "Drift Cause:",
                rtd_drift_text: "loose terminal screws increase resistance (Ohms), causing artificially HIGH temperature readings.",
                cold_iron_label: "The \"Cold Iron\" Check:",
                cold_iron1: "After 24h shutdown, all RTDs (Bearings, Oil, Water) should read within 1-2°C of each other (Ambient Temp).",
                cold_iron2: "If Turbine Bearing reads 35°C while surrounding air is 20°C (after cooldown), the sensor loop has high resistance. <strong>Check the terminal block for oxidation.</strong>",
                section3_title: "ALARM LOGIC AUDIT",
                audit_intro: "Review and hard-code these safety margins into the PLC Logic.",
                th_component: "Component",
                th_limit: "Material Limit",
                th_trip: "Trip (High-High) Setpoint",
                th_alarm: "Alarm (High) Setpoint",
                th_rationale: "Rationale",
                td_babbitt: "Babbitt Bearings",
                td_melt: "130°C (Melt)",
                td_zone: "Sudden failure zone starts > 90°C",
                td_stator: "Stator Windings (Class F)",
                td_insolation: "Maximize insulation life (10° rule)",
                td_oil: "Hydraulic Oil",
                td_oxi: "60°C (Oxidation)",
                td_varnish: "Prevent varnish formation",
                td_overspeed: "Turbine Overspeed",
                td_runaway: "Runaway",
                td_centrifugal: "Centrifugal force limit",
                section4_title: "DIGITAL SAFETY LOCKS",
                forcing_label: "Forcing Signals:",
                force1: "NEVER leave a \"Force\" active in the PLC code after testing.",
                force2: "<strong>Audit:</strong> Check \"Forced Variables\" list weekly. A forgotten \"Force True\" on the Lube Oil Pressure switch will destroy the turbine.",
                back_btn: "<< RETURN_MAIN_SYSTEM"
            },
            bs: {
                title: "PROTOKOL_DIGITALNOG_INTEGRITETA",
                subtitle: "Sinhronizacija fizičkog blizanca sa digitalnim blizancem",
                disc_risk: "⚠️ RIZIK OD NEPOVEZANOSTI",
                disc_strong: "SCADA ekran nije stvarnost.",
                disc_text1: "To je digitalna interpretacija naponskog signala.",
                disc_text2: "Ako SCADA kaže \"Temp. Ležaja: 45°C\", a ležaj je fizički na 80°C zbog pomjerenog signala otpora, mašina gori dok ekran izgleda normalno. <strong>Vjeruj, ali kalibriši.</strong>",
                section1_title: "PROVJERA PETLJE: VALIDACIJA S KRAJA NA KRAJ",
                proc_label: "Procedura za verifikaciju analognog signala (4-20mA):",
                proc_text: "Ne oslanjajte se samo na prikaz senzora. Morate verifikovati cijeli lanac: Senzor → PLC Ulazna kartica → SCADA Prikaz.",
                code_box_1: "TEST SEKVENCA: POZICIJA SPROVODNOG APARATA\n1. Fizički izmjerite otvor sprovodnog aparata (mm).\n2. Izračunajte teoretski % (npr., 50mm = 20%).\n3. Radio operater A: \"Fizički je 20.0%\"\n4. Radio operater B (Kontrolna soba): \"SCADA očitava ???\"\n--------------------------------------------------\nPROLAZ: 19.9% - 20.1%\nPAD: < 19.8% ili > 20.2% -> RE-SKALIRAJ PLC",
                deadband_label: "Zamka \"Mrtve zone\":",
                deadband_text: "Ako SCADA očitava 0.0% ali je fizički ventil otvoren za 2mm, oštećujete sjedište ventila. <strong>Nula mora biti APSOLUTNA NULA.</strong>",
                section2_title: "PROTOKOL POMJERANJA SENZORA",
                pressure_title: "Transduktori pritiska (Mjerna traka)",
                drift_cause_label: "Uzrok pomjeranja:",
                drift_cause_text: "Skokovi prekomjernog pritiska (hidraulički udar) trajno deformišu dijafragmu.",
                calib_check_label: "Provjera kalibracije (Atmosferska):",
                calib1: "Izolujte senzor i odzračite na atmosferu.",
                calib2: "<strong>SCADA mora očitavati 0.00 Bar.</strong>",
                calib3: "Ako je očitavanje > 0.1 Bar (fantomski pritisak), nulta tačka se pomjerila. Zamijenite ili ponovo nulirajte.",
                rtd_title: "RTD Senzori temperature (Validacija)",
                rtd_drift_label: "Uzrok pomjeranja:",
                rtd_drift_text: "labavi vijci terminala povećavaju otpor (Ohm), uzrokujući vještački VISOKA temperaturna očitavanja.",
                cold_iron_label: "Provjera \"Hladno gvožđe\":",
                cold_iron1: "Nakon 24h gašenja, svi RTD-ovi (Ležajevi, Ulje, Voda) bi trebali očitavati unutar 1-2°C jedan od drugog (Ambijentalna Temp).",
                cold_iron2: "Ako Turbinski ležaj očitava 35°C dok je okolni zrak 20°C (nakon hlađenja), senzorska petlja ima visok otpor. <strong>Provjerite terminalni blok za oksidaciju.</strong>",
                section3_title: "REVIZIJA LOGIKE ALARMA",
                audit_intro: "Pregledajte i tvrdo kodirajte ove sigurnosne margine u PLC logiku.",
                th_component: "Komponenta",
                th_limit: "Limit materijala",
                th_trip: "Tačka isključenja (Visoko-Visoko)",
                th_alarm: "Tačka alarma (Visoko)",
                th_rationale: "Racional",
                td_babbitt: "Babit ležajevi",
                td_melt: "130°C (Topljenje)",
                td_zone: "Zona iznenadnog kvara počinje > 90°C",
                td_stator: "Namotaji statora (Klasa F)",
                td_insolation: "Maksimiziranje vijeka izolacije (Pravilo 10°)",
                td_oil: "Hidraulično ulje",
                td_oxi: "60°C (Oksidacija)",
                td_varnish: "Spriječiti formiranje laka",
                td_overspeed: "Prekoračenje brzine turbine",
                td_runaway: "Odbjeg",
                td_centrifugal: "Granica centrifugalne sile",
                section4_title: "DIGITALNE SIGURNOSNE BRAVE",
                forcing_label: "Prisilni signali:",
                force1: "NIKADA ne ostavljajte \"Force\" aktivan u PLC kodu nakon testiranja.",
                force2: "<strong>Revizija:</strong> Provjeravajte listu \"Prisilnih varijabli\" sedmično. Zaboravljeni \"Force True\" na prekidaču pritiska ulja za podmazivanje uništiće turbinu.",
                back_btn: "<< POVRATAK_NA_GLAVNI_SISTEM"
            }
        };

        function setLang(lang) {
            document.querySelectorAll('[data-i18n]').forEach(el => {
                const key = el.getAttribute('data-i18n');
                if (i18n[lang][key]) {
                    el.innerHTML = i18n[lang][key];
                }
            });

            // Update button states
            document.querySelectorAll('.lang-btn').forEach(btn => {
                btn.classList.remove('active');
                if (btn.innerText.toLowerCase() === lang) {
                    btn.classList.add('active');
                }
            });

            localStorage.setItem('anohub_lang_pref', lang);
        }

        // Initialize from storage or default to English
        const savedLang = localStorage.getItem('anohub_lang_pref') || 'en';
        setLang(savedLang);
    </script>
</body>

</html>